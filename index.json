[{"content":"codepushæ˜¯å¾®è½¯ä¸€å¥—çƒ­æ›´æ–°ç³»ç»Ÿï¼Œæ‰˜ç®¡éƒ¨ç½²èµ„æºå¦‚ react-native , cordova ç­‰ CodePush-CLI æ˜¯çƒ­æ›´æ–°å®¢æˆ·ç«¯å·¥å…·ï¼Œç›®å‰å¾®è½¯å·²åºŸå¼ƒï¼Œå»ºè®®ä½¿ç”¨AppCenter-CLI\nCordova é™åˆ¶ï¼ˆåªèƒ½æ›´æ–°é™æ€èµ„æºï¼ŒåŸç”Ÿcodeä¸èƒ½æ›´æ–°ï¼‰ Any product changes which touch native code (e.g. upgrading Cordova versions, adding a new plugin) cannot be distributed via CodePush, and therefore, must be updated via the appropriate store(s).\nMainActivity è§¦å‘ webview åŠ è½½ file:///android_asset/www/index.html\ncode-push-cli å¸¸ç”¨å‘½ä»¤ #å®‰è£… æœ€æ–°ä¸º3.0 æˆ‘ä»¬ç”¨2 yarn global add code-push-cli@2 code-push -h # ä¼šæ‰“å¼€æµè§ˆå™¨ https://appcenter.ms/cli-login?hostname=CISZ03-0820 å¼¹å‡ºtoken code-push login # admin 123456 code-push login https://code-push.xx.top/ code-push whoami # åˆ›å»ºapp é»˜è®¤åˆ›å»ºä¸¤ä¸ªdeployment Production, Staging #code-push app add \u0026lt;appName\u0026gt; \u0026lt;os\u0026gt; \u0026lt;platform\u0026gt; code-push app add sankyu-test android cordova # æŸ¥çœ‹åº”ç”¨ code-push app ls code-push deployment ls sankyu-test -k # æŸ¥çœ‹deployment #code-push deployment history \u0026lt;appName\u0026gt; \u0026lt;deploymentName\u0026gt; [options] code-push deployment history sankyu-test Staging code-push deployment history sankyu-test Production # å‘å¸ƒ ç‰ˆæœ¬ä»¥config.xml version ä¸ºå‡†,å¯ä»¥æ‰‹åŠ¨æŒ‡å®š # code-push release-cordova \u0026lt;appName\u0026gt; \u0026lt;platform\u0026gt; [options] code-push release-cordova sankyu-test android -d Staging -t 0.0.2 # å‘å¸ƒ ^0.0.1 quasar build -m android code-push release-cordova sankyu-test android -d Production -t \u0026#34;^0.0.1\u0026#34; éƒ¨ç½²code-push-server https://github.com/lisong/code-push-server/blob/master/docker/README.md\ngit clone https://github.com/lisong/code-push-server.git cd code-push-server/docker vim docker-compose.yml # æ›¿æ¢ip :%s/YOU_MACHINE_IP/your ip/g ä¿®æ”¹é•œåƒä¸º panshx/code-push-server:latest ä¿®æ”¹config.jsä¸­tokenSecret å¯ä»¥æ‰“å¼€è¿æ¥https://www.grc.com/passwords.htmè·å– 63 random alpha-numeric charactersç±»å‹çš„éšæœºç”Ÿæˆæ•°ä½œä¸ºå¯†é’¥ å¯é€‰ä¿®æ”¹å­˜å‚¨ config.js common.storageType: 'oss' oss: { accessKeyId: \u0026quot;\u0026quot;, secretAccessKey: \u0026quot;\u0026quot;, endpoint: \u0026quot;https://oss-cn-shanghai.aliyuncs.com\u0026quot;, bucketName: \u0026quot;bucketName\u0026quot;, prefix: \u0026quot;\u0026quot;, // Key prefix in object key downloadUrl: \u0026quot;https://bucket.oss-cn-shanghai.aliyuncs.com/\u0026quot;, // binary files download host address. }, #å¯åŠ¨ 1. å¯åŠ¨redis æœ‰å°±å¤ç”¨ï¼Œæ²¡æœ‰å•ç‹¬èµ· docker run --name redis -v redisdata:/data -p 6379:6379 -d redis:4.0.11-alpine 2. å¯åŠ¨mysqlï¼Œå¯¼å…¥sqlï¼Œä¼šè‡ªåŠ¨åˆ›å»ºæ•°æ®åº“ï¼Œè¡¨ ./sql/codepush-all.sql:/docker-entrypoint-initdb.d/codepush-all.sql 3. å¯åŠ¨æœåŠ¡ docker-compose up // docker stack deploy -c docker-compose.yml code-push-server # æµ‹è¯•è¿é€šæ€§ admin 123456 é»˜è®¤ç™»å½•å¯†ç  curl -I http://your ip:3000/ docker-compose.yml æ”¹å†™ version: \u0026quot;3.7\u0026quot; services: server: image: panshx/code-push-server:latest volumes: - data-storage:/data/storage - data-tmp:/data/tmp - ./config.js:/config.js environment: DOWNLOAD_URL: \u0026quot;http://YOU_MACHINE_IP:3000/download\u0026quot; MYSQL_HOST: \u0026quot;10.0.4.3\u0026quot; MYSQL_PORT: \u0026quot;3306\u0026quot; MYSQL_USERNAME: \u0026quot;codepush\u0026quot; MYSQL_PASSWORD: \u0026quot;123456\u0026quot; MYSQL_DATABASE: \u0026quot;codepush\u0026quot; STORAGE_DIR: \u0026quot;/data/storage\u0026quot; DATA_DIR: \u0026quot;/data/tmp\u0026quot; NODE_ENV: \u0026quot;production\u0026quot; CONFIG_FILE: \u0026quot;/config.js\u0026quot; REDIS_HOST: \u0026quot;10.0.4.3\u0026quot; REDIS_PORT: \u0026quot;6379\u0026quot; VIRTUAL_HOST: httpbin.xiaoqiaotq.top LETSENCRYPT_HOST: httpbin.xiaoqiaotq.top VIRTUAL_PORT: 3000 deploy: resources: limits: cpus: \u0026quot;2\u0026quot; memory: 1000M restart_policy: condition: on-failure ports: - \u0026quot;3000:3000\u0026quot; networks: - servernet networks: servernet: volumes: data-storage: data-tmp: å®¢æˆ·ç«¯æ¥å…¥ https://github.com/Microsoft/cordova-plugin-code-push\nhttps://www.itguliang.com/post/bdc17ac0.html\ncordova plugin add cordova-plugin-code-push@latest ### ä¿®æ”¹config.xml \u0026lt;platform name=\u0026#34;android\u0026#34;\u0026gt; \u0026lt;allow-intent href=\u0026#34;market:*\u0026#34; /\u0026gt; \u0026lt;preference name=\u0026#34;CodePushDeploymentKey\u0026#34; value=\u0026#34;nVHPr6asLSusnWoLBNCSktk9FWbiqLF160UDgcc\u0026#34; /\u0026gt; \u0026lt;preference name=\u0026#34;CodePushServerUrl\u0026#34; value=\u0026#34;https://code-push.aa.top/\u0026#34; /\u0026gt; \u0026lt;/platform\u0026gt; ### ä»£ç æ¥å…¥ codePush.sync(); æŠ“åŒ… å‘ç‰ˆ code-push release-cordova wms-test android -d Staging -t 1.1.1\nPOST /apps/wms-test/deployments/Staging/release HTTP/1.1 Host: localhost:3000 Accept-Encoding: gzip, deflate User-Agent: node-superagent/3.8.3 X-CodePush-CLI-Version: 2.1.9 Accept: application/vnd.code-push.v2+json Authorization: Bearer tLDLTtCUSRYrO4P2BntrzPktkrgq4ksvOXqog X-CodePush-SDK-Version: 2.0.6 content-type: multipart/form-data; boundary=--------------------------641068731626182805276171 Content-Length: 931966 Connection: close ----------------------------641068731626182805276171 Content-Disposition: form-data; name=\u0026#34;package\u0026#34;; filename=\u0026#34;m6Xk8At6CX1ZRtH.zip\u0026#34; Content-Type: application/zip PK..........GV............ ...www/.DS_Store..A .@......6.l....H...D. ...w..:Z..W.\u0026amp;A.......{..f.\u0026lt;.Xun6...#...%.3\u0026#34;.l~..=v]..}......o.8...B.!.........!..!.|(...... .E9.......q ..9.....!.....0~........~.B,.4.....d./.X0.m.. ----------------------------641068731626182805276171 Content-Disposition: form-data; name=\u0026#34;packageInfo\u0026#34; {\u0026#34;description\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;isDisabled\u0026#34;:false,\u0026#34;isMandatory\u0026#34;:false,\u0026#34;rollout\u0026#34;:100,\u0026#34;appVersion\u0026#34;:\u0026#34;1.1.1\u0026#34;} ----------------------------641068731626182805276171-- HTTP/1.1 200 OK X-DNS-Prefetch-Control: off X-Frame-Options: SAMEORIGIN Strict-Transport-Security: max-age=15552000; includeSubDomains X-Download-Options: noopen X-Content-Type-Options: nosniff X-XSS-Protection: 1; mode=block Access-Control-Allow-Origin: * Access-Control-Allow-Headers: Origin, X-Requested-With, Content-Type, Accept, Authorization, X-CodePush-Plugin-Version, X-CodePush-Plugin-Name, X-CodePush-SDK-Version Access-Control-Allow-Methods: PUT,POST,GET,PATCH,DELETE,OPTIONS Content-Type: text/html; charset=utf-8 Content-Length: 18 ETag: W/\u0026#34;12-VQcfpGWTIWZxIW5CJEu508IDMlk\u0026#34; Date: Tue, 07 Feb 2023 08:35:40 GMT Connection: close {\u0026#34;msg\u0026#34;: \u0026#34;succeed\u0026#34;} ä»£ç æ›´æ–°æ£€æŸ¥ codepush.sync()è°ƒç”¨ http://localhost:3000/v0.1/public/codepush/update_check?deployment_key=K4TwqkWsAnkWjBIHaOijClKrMygF4ksvOXqog\u0026amp;app_version=1.3.4\u0026amp;package_hash=f7d21597ae65922062c71f7bac4fc7deef60c7775b82ede0f004f8a336dc73d9 # æœ‰æ›´æ–°è¿”å›ç¤ºä¾‹(è¿”å›æœ€æ–°ç‰ˆæœ¬) { \u0026#34;update_info\u0026#34;:{ \u0026#34;download_url\u0026#34;:\u0026#34;https://aaa.oss-cn-shanghai.aliyuncs.com//FnsxIg4pOx_TAzuvnlognY0qXpsS\u0026#34;, \u0026#34;description\u0026#34;:\u0026#34;\u0026#34;, \u0026#34;is_available\u0026#34;:true, \u0026#34;is_disabled\u0026#34;:false, \u0026#34;target_binary_range\u0026#34;:\u0026#34;1.0.0\u0026#34;, \u0026#34;label\u0026#34;:\u0026#34;v6\u0026#34;, \u0026#34;package_hash\u0026#34;:\u0026#34;827ec4301e2fbc59e297ac05ed26465e5449492d0391219dbc6bcb6f3c2c6e44\u0026#34;, \u0026#34;package_size\u0026#34;:931523, \u0026#34;should_run_binary_version\u0026#34;:false, \u0026#34;update_app_version\u0026#34;:false, \u0026#34;is_mandatory\u0026#34;:false } } # hashä¸€è‡´ï¼Œè¿”å›ç©ºçš„update_info {\u0026#34;update_info\u0026#34;:{\u0026#34;download_url\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;description\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;is_available\u0026#34;:false,\u0026#34;is_disabled\u0026#34;:true,\u0026#34;target_binary_range\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;label\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;package_hash\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;package_size\u0026#34;:0,\u0026#34;should_run_binary_version\u0026#34;:false,\u0026#34;update_app_version\u0026#34;:false,\u0026#34;is_mandatory\u0026#34;:false}} å›°æ‰°çš„é—®é¢˜ app_versionä¸ä¼šå˜ï¼Œé™¤éåœ¨config.xmlæŒ‡å®šæ–°ç‰ˆversionï¼Œæ­¤æ—¶éœ€è¦é‡æ–°æ‰“apkåŒ…ï¼Œçƒ­æ›´æ–°å°±å¤±å»ä»·å€¼äº†ï¼Œçƒ­æ›´æ–°åªä¼šæ›´æ–°labelï¼ˆv2 æ•°å­—ç´¯åŠ ï¼‰\næºç åˆ†æ å‚è€ƒï¼š https://www.itguliang.com/post/bdc17ac0.html https://github.com/lisong/code-push-server ","permalink":"https://xiaoqiaotq.github.io/posts/%E5%89%8D%E7%AB%AF/codepush%E7%83%AD%E6%9B%B4%E6%96%B0/","summary":"codepushæ˜¯å¾®è½¯ä¸€å¥—çƒ­æ›´æ–°ç³»ç»Ÿï¼Œæ‰˜ç®¡éƒ¨ç½²èµ„æºå¦‚ react-native , cordova ç­‰ CodePush-CLI æ˜¯çƒ­æ›´æ–°å®¢æˆ·ç«¯å·¥å…·ï¼Œç›®å‰å¾®è½¯å·²åºŸå¼ƒï¼Œå»ºè®®ä½¿ç”¨AppCenter-CLI\nCordova é™åˆ¶ï¼ˆåªèƒ½æ›´æ–°é™æ€èµ„æºï¼ŒåŸç”Ÿcodeä¸èƒ½æ›´æ–°ï¼‰ Any product changes which touch native code (e.g. upgrading Cordova versions, adding a new plugin) cannot be distributed via CodePush, and therefore, must be updated via the appropriate store(s).\nMainActivity è§¦å‘ webview åŠ è½½ file:///android_asset/www/index.html\ncode-push-cli å¸¸ç”¨å‘½ä»¤ #å®‰è£… æœ€æ–°ä¸º3.0 æˆ‘ä»¬ç”¨2 yarn global add code-push-cli@2 code-push -h # ä¼šæ‰“å¼€æµè§ˆå™¨ https://appcenter.ms/cli-login?hostname=CISZ03-0820 å¼¹å‡ºtoken code-push login # admin 123456 code-push login https://code-push.xx.top/ code-push whoami # åˆ›å»ºapp é»˜è®¤åˆ›å»ºä¸¤ä¸ªdeployment Production, Staging #code-push app add \u0026lt;appName\u0026gt; \u0026lt;os\u0026gt; \u0026lt;platform\u0026gt; code-push app add sankyu-test android cordova # æŸ¥çœ‹åº”ç”¨ code-push app ls code-push deployment ls sankyu-test -k # æŸ¥çœ‹deployment #code-push deployment history \u0026lt;appName\u0026gt; \u0026lt;deploymentName\u0026gt; [options] code-push deployment history sankyu-test Staging code-push deployment history sankyu-test Production # å‘å¸ƒ ç‰ˆæœ¬ä»¥config.","title":"codepushçƒ­æ›´æ–°"},{"content":"èƒŒæ™¯ é¡¹ç›®éœ€è¦å®ç°å‰ç«¯ä»»æ„å­—æ®µåŒ¹é…æŸ¥è¯¢ï¼Œæ•…éœ€è¦é…åˆè¡¨è¾¾å¼æ¥ç”Ÿäº§sqlï¼Œå…¶å®å°±æ˜¯å®šä¹‰ä¸€ç§DSLï¼Œè®©å‰åç«¯ç›¸äº’äº†è§£è¿™ä¸ªè¯­æ„ï¼Œè°ƒç ”åå†³å®šä½¿ç”¨Antlrï¼Œç›¸å…³ä»‹ç»å°±ä¸è¿‡åˆ†å¤šè¯´ï¼Œç›´æ¥çœ‹æ•ˆæœã€‚è¯­æ³•å‚è€ƒOdata filter ï¼ŒåæœŸä¸æ»¡è¶³å¯ä»¥ç›´æ¥ä¿®æ”¹g4æ–‡ä»¶\nOdata filterç¤ºä¾‹ Country_Region_Code eq \u0026#39;ES\u0026#39; or Country_Region_Code eq \u0026#39;US\u0026#39; Country_Region_Code eq \u0026#39;ES\u0026#39; and Payment_Terms_Code eq \u0026#39;14 DAYS\u0026#39; Entry_No ge 610 Entry_No lt 610 VAT_Bus_Posting_Group ne \u0026#39;EXPORT\u0026#39; Odata.g4 grammar OData; /* * Parser Rules */ program: expression; expression: LP expression RP # Parenthesis | K_STARTSWITH LP column=column_name \u0026#39;,\u0026#39; value=TEXT RP # StartsWith | K_ENDSWITH LP column=column_name \u0026#39;,\u0026#39; value=TEXT RP # EndsWith | K_CONTAINS LP column=column_name \u0026#39;,\u0026#39; value=TEXT RP # Contains | column=column_name K_IN LP value=decimal_array RP # InDecimal | column=column_name K_IN LP value=string_array RP # InText | column=column_name compare=( Equal | NotEqual | GreaterThan | GreaterThanOrEqual | LessThan | LessThanOrEqual) value=decimal # CompareDecimal | column=column_name compare=( Equal | NotEqual | GreaterThan | GreaterThanOrEqual | LessThan | LessThanOrEqual) value=TEXT # CompareText | expression logic = (K_AND | K_OR) expression\t# Logic ; column_name : COLUMN_NAME | \u0026#39;[\u0026#39; column_name \u0026#39;]\u0026#39; ; string_array : TEXT (\u0026#39;,\u0026#39; TEXT)* ; decimal_array : NUMBER (\u0026#39;,\u0026#39; NUMBER)* ; text: TEXT; decimal : NUMBER ; /* * Lexer Rules */ K_IN: I N; K_AND: A N D; K_OR: O R; K_STARTSWITH: S T A R T S W I T H; K_ENDSWITH: E N D S W I T H; K_CONTAINS: C O N T A I N S; LP : \u0026#39;(\u0026#39;; RP : \u0026#39;)\u0026#39;; Equal: E Q; NotEqual: N E; GreaterThan: G T; GreaterThanOrEqual: G E; LessThan: L T; LessThanOrEqual: L E; COLUMN_NAME : VALID_ID_START VALID_ID_CHAR* ; TEXT :\u0026#39;\u0026#34;\u0026#39; .*? \u0026#39;\u0026#34;\u0026#39; |\u0026#39;\\\u0026#39;\u0026#39; .*? \u0026#39;\\\u0026#39;\u0026#39; ; NUMBER : (SIGN)? UNSIGNED_INTEGER+ | (SIGN)? UNSIGNED_INTEGER+ (\u0026#39;.\u0026#39; UNSIGNED_INTEGER+)? ; fragment UNSIGNED_INTEGER : (\u0026#39;0\u0026#39; .. \u0026#39;9\u0026#39;) ; fragment SIGN : (\u0026#39;+\u0026#39; | \u0026#39;-\u0026#39;) ; fragment VALID_ID_START : LOWERCASE | UPERCASE | \u0026#39;_\u0026#39; ; fragment VALID_ID_CHAR : VALID_ID_START | (LOWERCASE | UPERCASE | DIGIT ) ; fragment LOWERCASE: [a-z]; fragment UPERCASE: [A-Z]; fragment DIGIT: [0-9]; fragment DIGITS: DIGIT+; fragment A: [aA]; fragment B: [bB]; fragment C: [cC]; fragment D: [dD]; fragment E: [eE]; fragment F: [fF]; fragment G: [gG]; fragment H: [hH]; fragment I: [iI]; fragment J: [jJ]; fragment K: [kK]; fragment L: [lL]; fragment M: [mM]; fragment N: [nN]; fragment O: [oO]; fragment P: [pP]; fragment Q: [qQ]; fragment R: [rR]; fragment S: [sS]; fragment T: [tT]; fragment U: [uU]; fragment V: [vV]; fragment W: [wW]; fragment X: [xX]; fragment Y: [yY]; fragment Z: [zZ]; SPACES: [ \\u000B\\t\\r\\n] -\u0026gt; channel(HIDDEN); å‰ç«¯ UI npmåŒ… npm i antlr4@4.11.0\nVisitorï¼ˆDSL to jsï¼‰ // This class defines a complete generic visitor for a parse tree produced by ODataParser. import ODataParser from \u0026#34;@/project/antlr/ODataParser\u0026#34;; import ODataVisitor from \u0026#34;@/project/antlr/ODataVisitor\u0026#34;; export default class ODataSqlVisitor extends ODataVisitor { filterPair={ logic:\u0026#39;AND\u0026#39;, pairs:[] } getFilterPair(){ return this.filterPair } // Visit a parse tree produced by ODataParser#CompareText. visitCompareText(ctx) { if (ctx.exception!=null) { throw ctx.exception; } const column = this.visit(ctx.column); const decimal= ctx.value.text.replace(/^\u0026#34;(.*)\u0026#34;$/,\u0026#34;$1\u0026#34;) const operator = this.getSQLOperator(ctx.compare.type); const pair= {column ,value: decimal,operator}; this.filterPair.pairs.push(pair) return pair; } // Visit a parse tree produced by ODataParser#CompareDecimal. visitCompareDecimal(ctx) { if (ctx.exception!=null) { throw ctx.exception; } const column = this.visit(ctx.column); const decimal = this.visit(ctx.value); const operator = this.getSQLOperator(ctx.compare.type); // return column + \u0026#34; \u0026#34; + operator + \u0026#34; \u0026#34; + decimal; const pair= {column ,value: decimal,operator}; this.filterPair.pairs.push(pair) return pair; } // Visit a parse tree produced by ODataParser#Logic. visitLogic(ctx){ if(ctx.exception!=null) { throw ctx.exception; } const left = this.visit(ctx.expression(0)); const right = this.visit(ctx.expression(1)); if (right == null){ return null; } if (ctx.logic.type== ODataParser.K_AND) { this.filterPair.logic = \u0026#34;AND\u0026#34;; // return left + \u0026#34; and \u0026#34; + right; return null; }else { this.filterPair.logic = \u0026#34;OR\u0026#34;; // return left + \u0026#34; or \u0026#34; + right; return null; } } // Visit a parse tree produced by ODataParser#column_name. visitColumn_name(ctx) { return ctx.getText(); } // Visit a parse tree produced by ODataParser#decimal. visitDecimal(ctx) { return ctx.getText(); } // visitText(ctx) { // const aa= ctx.getText().replace(/^\u0026#34;(.*)\u0026#34;$/,\u0026#34;$1\u0026#34;) // console.log(aa,ctx.getText()) // debugger // return aa // } getSQLOperator(compare) { let operator = null; switch (compare) { case ODataParser.Equal: operator = \u0026#34;=\u0026#34;; break; case ODataParser.NotEqual: operator = \u0026#34;\u0026lt;\u0026gt;\u0026#34;; break; case ODataParser.GreaterThan: operator = \u0026#34;\u0026gt;\u0026#34;; break; case ODataParser.GreaterThanOrEqual: operator = \u0026#34;\u0026gt;=\u0026#34;; break; case ODataParser.LessThan: operator = \u0026#34;\u0026lt;\u0026#34;; break; case ODataParser.LessThanOrEqual: operator = \u0026#34;\u0026lt;=\u0026#34;; break; } return operator; } } åç«¯ mavenåæ ‡ \u0026lt;!-- https://mvnrepository.com/artifact/org.antlr/antlr4-runtime --\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.antlr\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;antlr4-runtime\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;4.11.1\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; Visitorï¼ˆDSL to sqlï¼‰ å’Œå·¥å…·ç±» package com.sankyu.wms.antlr; import com.google.common.base.CaseFormat; public class ODataSqlVisitor extends ODataBaseVisitor { @Override public Object visitLogic(ODataParser.LogicContext ctx) { if (ctx.exception!=null) { throw ctx.exception; } String left = (String) visit(ctx.expression(0)); String right = (String) visit(ctx.expression(1)); if (right == null){ return null; } if (ctx.logic.getType()==ODataParser.K_AND) { return left + \u0026#34; and \u0026#34; + right; }else { return left + \u0026#34; or \u0026#34; + right; } } @Override public Object visitColumn_name(ODataParser.Column_nameContext ctx) { return CaseFormat.UPPER_CAMEL.to(CaseFormat.LOWER_UNDERSCORE, ctx.getText()); } @Override public Object visitDecimal(ODataParser.DecimalContext ctx) { return ctx.getText(); } // @Override // public Object visitText(ODataParser.TextContext ctx) { // return ctx.getText(); // } @Override public Object visitCompareDecimal(ODataParser.CompareDecimalContext ctx) { if (ctx.exception!=null) { throw ctx.exception; } String column = (String)visit(ctx.column); String decimal = (String)visit(ctx.value); String operator = getSQLOperator(ctx.compare.getType()); return column + \u0026#34; \u0026#34; + operator + \u0026#34; \u0026#34; + decimal; } @Override public Object visitCompareText(ODataParser.CompareTextContext ctx) { if (ctx.exception!=null) { throw ctx.exception; } String column = (String)visit(ctx.column); String decimal = ctx.value.getText(); String operator = getSQLOperator(ctx.compare.getType()); return column + \u0026#34; \u0026#34; + operator + \u0026#34; \u0026#34; + decimal; } private String getSQLOperator(Integer compare) { String operator = null; switch (compare) { case ODataParser.Equal: operator = \u0026#34;=\u0026#34;; break; case ODataParser.NotEqual: operator = \u0026#34;\u0026lt;\u0026gt;\u0026#34;; break; case ODataParser.GreaterThan: operator = \u0026#34;\u0026gt;\u0026#34;; break; case ODataParser.GreaterThanOrEqual: operator = \u0026#34;\u0026gt;=\u0026#34;; break; case ODataParser.LessThan: operator = \u0026#34;\u0026lt;\u0026#34;; break; case ODataParser.LessThanOrEqual: operator = \u0026#34;\u0026lt;=\u0026#34;; break; } return operator; } } å‚è€ƒ https://olingo.apache.org/doc/odata2/tutorials/Olingo_Tutorial_AdvancedRead_FilterVisitor.html https://blog.51cto.com/u_15067225/2603738 https://learn.microsoft.com/en-us/dynamics-nav/using-filter-expressions-in-odata-uris https://github.com/huazailmh/ODataFilterParser/blob/master/Parser/ODataFilterVisitor.cs ","permalink":"https://xiaoqiaotq.github.io/posts/misc/antlr4%E5%88%9D%E5%AD%A6/","summary":"èƒŒæ™¯ é¡¹ç›®éœ€è¦å®ç°å‰ç«¯ä»»æ„å­—æ®µåŒ¹é…æŸ¥è¯¢ï¼Œæ•…éœ€è¦é…åˆè¡¨è¾¾å¼æ¥ç”Ÿäº§sqlï¼Œå…¶å®å°±æ˜¯å®šä¹‰ä¸€ç§DSLï¼Œè®©å‰åç«¯ç›¸äº’äº†è§£è¿™ä¸ªè¯­æ„ï¼Œè°ƒç ”åå†³å®šä½¿ç”¨Antlrï¼Œç›¸å…³ä»‹ç»å°±ä¸è¿‡åˆ†å¤šè¯´ï¼Œç›´æ¥çœ‹æ•ˆæœã€‚è¯­æ³•å‚è€ƒOdata filter ï¼ŒåæœŸä¸æ»¡è¶³å¯ä»¥ç›´æ¥ä¿®æ”¹g4æ–‡ä»¶\nOdata filterç¤ºä¾‹ Country_Region_Code eq \u0026#39;ES\u0026#39; or Country_Region_Code eq \u0026#39;US\u0026#39; Country_Region_Code eq \u0026#39;ES\u0026#39; and Payment_Terms_Code eq \u0026#39;14 DAYS\u0026#39; Entry_No ge 610 Entry_No lt 610 VAT_Bus_Posting_Group ne \u0026#39;EXPORT\u0026#39; Odata.g4 grammar OData; /* * Parser Rules */ program: expression; expression: LP expression RP # Parenthesis | K_STARTSWITH LP column=column_name \u0026#39;,\u0026#39; value=TEXT RP # StartsWith | K_ENDSWITH LP column=column_name \u0026#39;,\u0026#39; value=TEXT RP # EndsWith | K_CONTAINS LP column=column_name \u0026#39;,\u0026#39; value=TEXT RP # Contains | column=column_name K_IN LP value=decimal_array RP # InDecimal | column=column_name K_IN LP value=string_array RP # InText | column=column_name compare=( Equal | NotEqual | GreaterThan | GreaterThanOrEqual | LessThan | LessThanOrEqual) value=decimal # CompareDecimal | column=column_name compare=( Equal | NotEqual | GreaterThan | GreaterThanOrEqual | LessThan | LessThanOrEqual) value=TEXT # CompareText | expression logic = (K_AND | K_OR) expression\t# Logic ; column_name : COLUMN_NAME | \u0026#39;[\u0026#39; column_name \u0026#39;]\u0026#39; ; string_array : TEXT (\u0026#39;,\u0026#39; TEXT)* ; decimal_array : NUMBER (\u0026#39;,\u0026#39; NUMBER)* ; text: TEXT; decimal : NUMBER ; /* * Lexer Rules */ K_IN: I N; K_AND: A N D; K_OR: O R; K_STARTSWITH: S T A R T S W I T H; K_ENDSWITH: E N D S W I T H; K_CONTAINS: C O N T A I N S; LP : \u0026#39;(\u0026#39;; RP : \u0026#39;)\u0026#39;; Equal: E Q; NotEqual: N E; GreaterThan: G T; GreaterThanOrEqual: G E; LessThan: L T; LessThanOrEqual: L E; COLUMN_NAME : VALID_ID_START VALID_ID_CHAR* ; TEXT :\u0026#39;\u0026#34;\u0026#39; .","title":"Antlr4åˆå­¦"},{"content":"é—®é¢˜ ä»Šå¤©é‡åˆ°ä¸ªé—®é¢˜ï¼ŒMac m1 ä¸Šæ‹‰å–ä¹‹å‰javaæ„å»ºçš„ç¨‹åºå‘ç°è·‘ä¸èµ·æ¥ï¼Œç¬¬ä¸€ååº”armå¹³å°ä¸å…¼å®¹ä¹‹å‰åœ¨x86æ¶æ„ä¸‹æ„å»ºçš„é•œåƒã€‚ ç°å¦‚ä»Šäº‘å‚å•†å¥½å¤šæœåŠ¡å™¨éƒ½æ˜¯armæ¶æ„çš„ï¼ŒåŠ ä¸Šwindow11éƒ½æ”¯æŒarmæ¶æ„äº†ï¼ˆWindows on ARMï¼‰ï¼Œarmä»¥åä¼šè¶Šæ¥è¶Šé¢‘ç¹ä½¿ç”¨äº†ã€‚ è¿™æ—¶å°±å¾—ç¥­å‡ºdockerå‡ºçš„åˆ©å™¨ buildxï¼Œå¯ä»¥ä¸€æ¬¡æ„å»ºå¤šä¸ªå¹³å°çš„é•œåƒã€‚åºŸè¯ä¸å¤šï¼Œå¼€æã€‚ã€‚\nbuildxå…¶å®æ˜¯ä¸ªå®¹å™¨å·¥å…· moby/buildkit:buildx-stable-1 # Create a new builder âœ ~ docker buildx create --name mybuilder --bootstrap --use # æŸ¥çœ‹builder âœ ~ docker buildx inspect mybuilder Name: mybuilder Driver: docker-container Nodes: Name: mybuilder0 Endpoint: unix:///var/run/docker.sock Status: running Buildkit: v0.11.2 Platforms: linux/arm64, linux/amd64, linux/amd64/v2, linux/riscv64, linux/ppc64le, linux/s390x, linux/386, linux/mips64le, linux/mips64, linux/arm/v7, linux/arm/v6 æ„å»º # ä¸€æ¡å‘½ä»¤æå®šï¼Œä¼špudhåˆ°registry åŒºåˆ«äºå¸¸è§„build âœ ~ docker buildx build --platform linux/arm64/v8,linux/amd64 -t registry.cn-hangzhou.aliyuncs.com/xiaoqioatq2/aa:0.2 --push back # å¸¸è§„build ä¸push âœ ~ docker build -t registry.cn-hangzhou.aliyuncs.com/xiaoqioatq2/aa:0.1 back æŸ¥çœ‹registryæ„å»ºæˆåŠŸ âœ ~ docker buildx imagetools inspect registry.cn-hangzhou.aliyuncs.com/xiaoqioatq2/aa:0.2 Name: registry.cn-hangzhou.aliyuncs.com/xiaoqioatq2/aa:0.2 MediaType: application/vnd.docker.distribution.manifest.list.v2+json Digest: sha256:d1bce5ac3d722d5839417ba1524c6559db491569f900f20c8dd080f03e931bf9 Manifests: Name: registry.cn-hangzhou.aliyuncs.com/xiaoqioatq2/aa:0.2@sha256:3e4d09f006d30c2644783a84abe99d22631930fb0a912bd291d4820d5eb328ac MediaType: application/vnd.docker.distribution.manifest.v2+json Platform: linux/arm64 Name: registry.cn-hangzhou.aliyuncs.com/xiaoqioatq2/aa:0.2@sha256:f1e39a33c800f3aab5b2e9de497871ae1a5b3e1b918b57bd9724d2b795e8b49f MediaType: application/vnd.docker.distribution.manifest.v2+json Platform: linux/amd64 å®¢æˆ·ç«¯æµ‹è¯• ä¼šè‡ªåŠ¨æ‹‰å–è‡ªå·±å¹³å°çš„é•œåƒ Apple M1 ï¼ˆARM64ï¼‰ âœ ~ docker pull registry.cn-hangzhou.aliyuncs.com/xiaoqioatq2/aa:0.2 0.2: Pulling from xiaoqioatq2/aa 0362ad1dd800: Already exists 571218f61883: Already exists abe576d65b4c: Already exists 88e233291907: Pull complete 6f085c5d0e88: Pull complete c740effa2ce7: Pull complete Digest: sha256:d1bce5ac3d722d5839417ba1524c6559db491569f900f20c8dd080f03e931bf9 Status: Downloaded newer image for registry.cn-hangzhou.aliyuncs.com/xiaoqioatq2/aa:0.2 registry.cn-hangzhou.aliyuncs.com/xiaoqioatq2/aa:0.2 âœ ~ docker image inspect registry.cn-hangzhou.aliyuncs.com/xiaoqioatq2/aa:0.2 --format \u0026#39;{{.Os}}/{{.Architecture}}\u0026#39; linux/arm64 Centos ï¼ˆAMD64ï¼‰ [root@VM-4-3-centos ~]# docker pull registry.cn-hangzhou.aliyuncs.com/xiaoqioatq2/aa:0.2 0.2: Pulling from xiaoqioatq2/aa e7c96db7181b: Already exists f910a506b6cb: Already exists c2274a1a0e27: Already exists 5023d05d0236: Pull complete 65e39c71f562: Pull complete c740effa2ce7: Pull complete Digest: sha256:d1bce5ac3d722d5839417ba1524c6559db491569f900f20c8dd080f03e931bf9 Status: Downloaded newer image for registry.cn-hangzhou.aliyuncs.com/xiaoqioatq2/aa:0.2 registry.cn-hangzhou.aliyuncs.com/xiaoqioatq2/aa:0.2 [root@VM-4-3-centos ~]# docker image inspect registry.cn-hangzhou.aliyuncs.com/xiaoqioatq2/aa:0.2 --format \u0026#39;{{.Os}}/{{.Architecture}}\u0026#39; linux/amd64 å‘ç°çš„é—®é¢˜ é•œåƒæ‘˜è¦æ··ä¹± docker cli æ‹‰å–é•œåƒæ—¶digestæ˜¯manifestæ€»çš„æ‘˜è¦ï¼Œä¸æ˜¯å„è‡ªå¹³å°çš„digestï¼Œä¹Ÿæœ‰äººæäº†issueï¼ŒæœŸå¾…æ—©æ—¥è§£å†³ã€‚\nDocker hub åªæ˜¾ç¤ºå„ä¸ªå¹³å°çš„digestï¼Œä¸æ˜¾ç¤ºæ€»digestã€‚ é˜¿é‡Œäº‘registry åªæ˜¾ç¤ºäº†amd64å¹³å°çš„digest ä¼šè¯¯å¯¼ã€‚ å¤šå¹³å°æ„å»ºé€Ÿåº¦æ¯”è¾ƒæ…¢ï¼ŒåæœŸè€ƒè™‘ç”¨github actionæ¥æ„å»º\nå‚è€ƒï¼š https://www.thorsten-hans.com/how-to-build-multi-arch-docker-images-with-ease/ https://www.docker.com/blog/faster-multi-platform-builds-dockerfile-cross-compilation-guide/ ","permalink":"https://xiaoqiaotq.github.io/posts/linux/docker%E5%A4%9A%E5%B9%B3%E5%8F%B0%E6%9E%84%E5%BB%BA/","summary":"é—®é¢˜ ä»Šå¤©é‡åˆ°ä¸ªé—®é¢˜ï¼ŒMac m1 ä¸Šæ‹‰å–ä¹‹å‰javaæ„å»ºçš„ç¨‹åºå‘ç°è·‘ä¸èµ·æ¥ï¼Œç¬¬ä¸€ååº”armå¹³å°ä¸å…¼å®¹ä¹‹å‰åœ¨x86æ¶æ„ä¸‹æ„å»ºçš„é•œåƒã€‚ ç°å¦‚ä»Šäº‘å‚å•†å¥½å¤šæœåŠ¡å™¨éƒ½æ˜¯armæ¶æ„çš„ï¼ŒåŠ ä¸Šwindow11éƒ½æ”¯æŒarmæ¶æ„äº†ï¼ˆWindows on ARMï¼‰ï¼Œarmä»¥åä¼šè¶Šæ¥è¶Šé¢‘ç¹ä½¿ç”¨äº†ã€‚ è¿™æ—¶å°±å¾—ç¥­å‡ºdockerå‡ºçš„åˆ©å™¨ buildxï¼Œå¯ä»¥ä¸€æ¬¡æ„å»ºå¤šä¸ªå¹³å°çš„é•œåƒã€‚åºŸè¯ä¸å¤šï¼Œå¼€æã€‚ã€‚\nbuildxå…¶å®æ˜¯ä¸ªå®¹å™¨å·¥å…· moby/buildkit:buildx-stable-1 # Create a new builder âœ ~ docker buildx create --name mybuilder --bootstrap --use # æŸ¥çœ‹builder âœ ~ docker buildx inspect mybuilder Name: mybuilder Driver: docker-container Nodes: Name: mybuilder0 Endpoint: unix:///var/run/docker.sock Status: running Buildkit: v0.11.2 Platforms: linux/arm64, linux/amd64, linux/amd64/v2, linux/riscv64, linux/ppc64le, linux/s390x, linux/386, linux/mips64le, linux/mips64, linux/arm/v7, linux/arm/v6 æ„å»º # ä¸€æ¡å‘½ä»¤æå®šï¼Œä¼špudhåˆ°registry åŒºåˆ«äºå¸¸è§„build âœ ~ docker buildx build --platform linux/arm64/v8,linux/amd64 -t registry.","title":"Dockerå¤šå¹³å°æ„å»º"},{"content":"è‡´æ•¬æ¯ä¸€ä¸ªæ‰›ä½äº†ç”Ÿæ´»çš„å¹³å‡¡äºº ","permalink":"https://xiaoqiaotq.github.io/posts/misc/%E7%BD%91%E6%98%932022%E5%B9%B4%E5%BA%A6%E7%9B%98%E7%82%B9/","summary":"è‡´æ•¬æ¯ä¸€ä¸ªæ‰›ä½äº†ç”Ÿæ´»çš„å¹³å‡¡äºº ","title":"ç½‘æ˜“2022å¹´åº¦ç›˜ç‚¹"},{"content":"èƒŒæ™¯ å®¶é‡Œè·¯ç”±å™¨ä¿¡å·å¤ªå·®äº†æƒ³æ¢ä¸€å°ï¼ŒçœŸå¥½çœ‹åˆ°æ‹¼å¤šå¤šæœ‰æ´»åŠ¨ï¼ˆ360RMBï¼‰å°±å…¥æ‰‹äº†ä¸€å°ï¼Œé¡ºä¾¿æ‰‹ç—’æƒ³åˆ·ä¸‹æœºï¼Œçœ‹çœ‹æœ‰ä»€ä¹ˆå¥½ç©çš„è½¯ä»¶å’Œåº”ç”¨ã€‚\né…ç½® çº¢ç±³ AX6000 æ­è½½çš„æ˜¯ MTK 2021 å¹´å‘å¸ƒçš„ Filogic 830 å¹³å°ï¼Œå…·ä½“å‹å·æ˜¯ mt7986aï¼Œå››æ ¸ ARM A53 çš„æ¶æ„ï¼Œ 512M å†…å­˜å’Œ 128M é—ªå­˜\nåˆ·æœºopenwrt https://openwrt.org/toh/xiaomi/redmi_ax6000\nå®˜æ–¹å›ºä»¶è¿˜æ²¡æœ‰release å…ˆä¸åˆ·æœºäº† https://downloads.openwrt.org/snapshots/targets/mediatek/filogic/\nå…ˆè´´ä¸€ä¸ªå®˜æ–¹åˆ·æœºæ•™æï¼Œç­‰releaseå†å›å¤´çœ‹çœ‹ https://github.com/openwrt/openwrt/pull/11115\nGain ssh access (see the link: https://openwrt.org/toh/xiaomi/redmi_ax6000#installation) Check current stock system COMMAND: cat /proc/cmdline sample OUTPUT: console=ttyS0,115200n1 loglevel=8 firmware=1 uart_en=1 if firmware=1, current system is ubi1 if firmware=0, current system is ubi0 Setup nvram If the current system is ubi1, please set it up so that the next time it will boot from ubi: nvram set boot_wait=on nvram set uart_en=1 nvram set flag_boot_rootfs=0 nvram set flag_last_success=0 nvram set flag_boot_success=1 nvram set flag_try_sys1_failed=0 nvram set flag_try_sys2_failed=0 nvram commit If the current system is ubi, please set it up so that the next time it will boot from ubi1:\nnvram set boot_wait=on nvram set uart_en=1 nvram set flag_boot_rootfs=1 nvram set flag_last_success=1 nvram set flag_boot_success=1 nvram set flag_try_sys1_failed=0 nvram set flag_try_sys2_failed=0 nvram commit Flash initramfs-factory.ubi If the firmware=1, the current system is using ubi1. In this case, flash the image to ubi: ubiformat /dev/mtd8 -y -f /tmp/initramfs-factory.ubi If the firmware=0, the current system is using ubi. In this case, flash the image to ubi1: ubiformat /dev/mtd9 -y -f /tmp/initramfs-factory.ubi After rebooting, the system should now boot into the openwrt initramfs system. Flash the squashfs-sysupgrade.bin via ssh sysupgrade -n /tmp/squashfs-sysupgrade.bin or you could do sysupgrade via luci Done.\ngithub issueè¿½è¸ªè¿›åº¦ https://github.com/openwrt/openwrt/issues?q=11115\nå…³äºAX6000çš„åˆ·æœºè®¨è®º https://forum.openwrt.org/t/add-openwrt-support-for-xiaomi-redmi-ax6000/125008/378\nå°ç±³å®˜æ–¹å›ºä»¶åœ°å€å’Œç‰ˆæœ¬ https://www.miwifi.com/miwifi_download.html 1.0.48 ä¸‹è½½åœ°å€ https://cdn.cnbj1.fds.api.mi-img.com/xiaoqiang/rom/rb06/miwifi_rb06_firmware_847e9_1.0.48.bin\n","permalink":"https://xiaoqiaotq.github.io/posts/linux/%E7%BA%A2%E7%B1%B3ax6000%E5%88%B7%E6%9C%BA/","summary":"èƒŒæ™¯ å®¶é‡Œè·¯ç”±å™¨ä¿¡å·å¤ªå·®äº†æƒ³æ¢ä¸€å°ï¼ŒçœŸå¥½çœ‹åˆ°æ‹¼å¤šå¤šæœ‰æ´»åŠ¨ï¼ˆ360RMBï¼‰å°±å…¥æ‰‹äº†ä¸€å°ï¼Œé¡ºä¾¿æ‰‹ç—’æƒ³åˆ·ä¸‹æœºï¼Œçœ‹çœ‹æœ‰ä»€ä¹ˆå¥½ç©çš„è½¯ä»¶å’Œåº”ç”¨ã€‚\né…ç½® çº¢ç±³ AX6000 æ­è½½çš„æ˜¯ MTK 2021 å¹´å‘å¸ƒçš„ Filogic 830 å¹³å°ï¼Œå…·ä½“å‹å·æ˜¯ mt7986aï¼Œå››æ ¸ ARM A53 çš„æ¶æ„ï¼Œ 512M å†…å­˜å’Œ 128M é—ªå­˜\nåˆ·æœºopenwrt https://openwrt.org/toh/xiaomi/redmi_ax6000\nå®˜æ–¹å›ºä»¶è¿˜æ²¡æœ‰release å…ˆä¸åˆ·æœºäº† https://downloads.openwrt.org/snapshots/targets/mediatek/filogic/\nå…ˆè´´ä¸€ä¸ªå®˜æ–¹åˆ·æœºæ•™æï¼Œç­‰releaseå†å›å¤´çœ‹çœ‹ https://github.com/openwrt/openwrt/pull/11115\nGain ssh access (see the link: https://openwrt.org/toh/xiaomi/redmi_ax6000#installation) Check current stock system COMMAND: cat /proc/cmdline sample OUTPUT: console=ttyS0,115200n1 loglevel=8 firmware=1 uart_en=1 if firmware=1, current system is ubi1 if firmware=0, current system is ubi0 Setup nvram If the current system is ubi1, please set it up so that the next time it will boot from ubi: nvram set boot_wait=on nvram set uart_en=1 nvram set flag_boot_rootfs=0 nvram set flag_last_success=0 nvram set flag_boot_success=1 nvram set flag_try_sys1_failed=0 nvram set flag_try_sys2_failed=0 nvram commit If the current system is ubi, please set it up so that the next time it will boot from ubi1:","title":"çº¢ç±³Ax6000åˆ·æœº"},{"content":"https://wsgzao.github.io/post/lrzsz/\nhttps://gist.github.com/meowoodie/4bcf6d6ae81727b618bf\nlrzsz å®¢æˆ·ç«¯ æœåŠ¡ç«¯éƒ½å¾—å®‰è£…\n# å®‰è£…æœ¬åœ° é»˜è®¤è£…åœ¨/opt/homebrew/bin ç›®å½• brew install lrzsz # åœ¨ / usr/loal/bin ç›®å½•ä¸‹åˆ›å»ºä¸¤ä¸ªæ–‡ä»¶ cd /usr/local/bin wget https://raw.githubusercontent.com/RobberPhex/iterm2-zmodem/master/iterm2-recv-zmodem.sh wget https://raw.githubusercontent.com/RobberPhex/iterm2-zmodem/master/iterm2-send-zmodem.sh # èµ‹äºˆè¿™ä¸¤ä¸ªæ–‡ä»¶å¯æ‰§è¡Œæƒé™ chmod 777 /usr/local/bin/iterm2-* # é…ç½®item è§ä¸‹å›¾ Perference-\u0026gt; Profiles -\u0026gt; Default -\u0026gt; Advanced -\u0026gt; Triggers çš„ Edit æŒ‰é’®ï¼Œ Regular expression: rz waiting to receive.\\*\\*B0100 Action: Run Silent Coprocess Parameters: /usr/local/bin/iterm2-send-zmodem.sh Instant: checked Regular expression: \\*\\*B00000000000000 Action: Run Silent Coprocess Parameters: /usr/local/bin/iterm2-recv-zmodem.sh Instant: checked æ”¹è„šæœ¬sh /usr/local/bin to /opt/homebrew/bin/ ","permalink":"https://xiaoqiaotq.github.io/posts/linux/iterm_lrzsz/","summary":"https://wsgzao.github.io/post/lrzsz/\nhttps://gist.github.com/meowoodie/4bcf6d6ae81727b618bf\nlrzsz å®¢æˆ·ç«¯ æœåŠ¡ç«¯éƒ½å¾—å®‰è£…\n# å®‰è£…æœ¬åœ° é»˜è®¤è£…åœ¨/opt/homebrew/bin ç›®å½• brew install lrzsz # åœ¨ / usr/loal/bin ç›®å½•ä¸‹åˆ›å»ºä¸¤ä¸ªæ–‡ä»¶ cd /usr/local/bin wget https://raw.githubusercontent.com/RobberPhex/iterm2-zmodem/master/iterm2-recv-zmodem.sh wget https://raw.githubusercontent.com/RobberPhex/iterm2-zmodem/master/iterm2-send-zmodem.sh # èµ‹äºˆè¿™ä¸¤ä¸ªæ–‡ä»¶å¯æ‰§è¡Œæƒé™ chmod 777 /usr/local/bin/iterm2-* # é…ç½®item è§ä¸‹å›¾ Perference-\u0026gt; Profiles -\u0026gt; Default -\u0026gt; Advanced -\u0026gt; Triggers çš„ Edit æŒ‰é’®ï¼Œ Regular expression: rz waiting to receive.\\*\\*B0100 Action: Run Silent Coprocess Parameters: /usr/local/bin/iterm2-send-zmodem.sh Instant: checked Regular expression: \\*\\*B00000000000000 Action: Run Silent Coprocess Parameters: /usr/local/bin/iterm2-recv-zmodem.sh Instant: checked æ”¹è„šæœ¬sh /usr/local/bin to /opt/homebrew/bin/ ","title":"Iterm lrzsz"},{"content":"å¾®ä¿¡æ”¯ä»˜ https://pay.weixin.qq.com/wiki/doc/api/jsapi.php?chapter=9_4\nhttps://github.com/Wechat-Group/WxJava\nhttps://pay.weixin.qq.com/wiki/doc/api/wxa/wxa_api.php?chapter=2_2\nå¾®ä¿¡å¹³å°ä»‹ç»ï¼š\nå…¬ä¼—å·å¹³å° å•†æˆ·å¹³å° å¼€æ”¾å¹³å° æ”¯ä»˜äº§å“åå­—å˜æ›´ï¼š\nå…¬ä¼—å·æ”¯ä»˜-å˜æ›´ä¸º-JSAPIæ”¯ä»˜ã€‚ å¾®ä¿¡æµè§ˆå™¨ æ‰«ç æ”¯ä»˜-å˜æ›´ä¸º-Nativeæ”¯ä»˜ ç³»ç»ŸæŒ‰å¾®ä¿¡æ”¯ä»˜åè®®ç”Ÿæˆæ”¯ä»˜äºŒç»´ç ï¼Œéç§»åŠ¨æ”¯ä»˜ åˆ·å¡æ”¯ä»˜-å˜æ›´ä¸º-ä»˜æ¬¾ç æ”¯ä»˜ çº¿ä¸‹æ”¶é“¶ APPæ”¯ä»˜ã€‚ç§»åŠ¨ç«¯sdk H5æ”¯ä»˜ ç§»åŠ¨æµè§ˆå™¨ï¼ŒåŒºåˆ†ä¸åŒå¾®ä¿¡æµè§ˆå™¨ å°ç¨‹åºæ”¯ä»˜ å°ç¨‹åºç¯å¢ƒä¸­æ”¯ä»˜ å…¶ä»–å¾…åº”ç”¨ ä¼ä¸šä»˜æ¬¾æ¥å£ ï¼Ÿ ä»˜æ¬¾åˆ°é›¶é’±-å•†æˆ· ä»˜æ¬¾åˆ°é“¶è¡Œå¡-å•†æˆ· ç”µå­å‘ç¥¨ åˆå•æ”¯ä»˜ æŠ¥å…³ https://api.mch.weixin.qq.com/v3/refund/domestic/refunds\nç–‘é—® å•†æˆ·è¯ä¹¦ vs å¹³å°è¯ä¹¦ ï¼ˆå¯ä»¥ç†è§£å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ï¼‰ è¯ä¹¦è¿‡æœŸé—®é¢˜ï¼ˆå•†æˆ·å’Œå¹³å°ï¼‰ï¼Œæ”¯ä»˜å®æœ‰æé†’ï¼Œå¾®ä¿¡æ— ï¼Œè¿‡æœŸéœ€è¦å¼€å‘æ‰‹åŠ¨æ›¿æ¢ æ”¯ä»˜å®æ”¯ä»˜ https://opendocs.alipay.com/open/204/01dcc0?ref=api\nå¼€æ”¾å¹³å°\nAlipayConfig\nCN=Ant Financial Certification Authority Class 1 R1, OU=Certification Authority, O=Ant Financial, C=CN CN=2088421377101215-2021002127627083, OU=Alipay, O=é¸¿æµ·ï¼ˆè‹å·ï¼‰é£Ÿå“ç§‘æŠ€è‚¡ä»½æœ‰é™å…¬å¸, C=CN\nCN=æ”¯ä»˜å®(ä¸­å›½)ç½‘ç»œæŠ€æœ¯æœ‰é™å…¬å¸-2088421377101215, OU=Alipay, O=é¸¿æµ·ï¼ˆè‹å·ï¼‰é£Ÿå“ç§‘æŠ€è‚¡ä»½æœ‰é™å…¬å¸, C=CN CN=Ant Financial Certification Authority Class 2 R1, OU=Certification Authority, O=Ant Financial, C=CN CN=Ant Financial Certification Authority R1, OU=Certification Authority, O=Ant Financial, C=CN\nsignatuere alg:SHA384withECDSA publickey : EC CN=Ant Financial Certification Authority E1, OU=Certification Authority, O=Ant Financial, C=CN\nsignatuere alg:SHA256withRSA publicKey: RSA (4,096 bits) CN=Ant Financial Certification Authority R1, OU=Certification Authority, O=Ant Financial, C=CN\nsignatuere alg:SHA1withRSA publicKey: RSA(2048) CN=iTrusChina Class 2 Root CA - G3, OU=China Trust Network, O=iTrusChina, C=CN\nç­¾åä¸»è¦åŒ…å«ä¸¤ä¸ªè¿‡ç¨‹ï¼šæ‘˜è¦å’Œéå¯¹ç§°åŠ å¯†ï¼Œé¦–å…ˆå¯¹éœ€è¦ç­¾åçš„æ•°æ®åšæ‘˜è¦ï¼ˆç±»ä¼¼äºå¸¸è§çš„MD5ï¼‰åå¾—åˆ°æ‘˜è¦ç»“æœï¼Œç„¶åé€šè¿‡ç­¾åè€…çš„ç§é’¥å¯¹æ‘˜è¦ç»“æœè¿›è¡Œéå¯¹ç§°åŠ å¯†å³å¯å¾—åˆ°ç­¾åç»“æœã€‚\nRSA2(SHA256WithRSA):ï¼ˆå¼ºçƒˆæ¨èä½¿ç”¨ï¼‰ï¼Œå¼ºåˆ¶è¦æ±‚RSAå¯†é’¥çš„é•¿åº¦è‡³å°‘ä¸º2048. RSA(SHA1WithRSA):å¯¹RSAå¯†é’¥çš„é•¿åº¦ä¸é™åˆ¶ï¼Œæ¨èä½¿ç”¨2048ä½ä»¥ä¸Š\nbiz_content -\u0026gt; {\u0026#34;out_request_no\u0026#34;:\u0026#34;HZ01RF003\u0026#34;,\u0026#34;out_trade_no\u0026#34;:\u0026#34;DH-O-2022-12-08-978069\u0026#34;,\u0026#34;refund_amount\u0026#34;:\u0026#34;0.01\u0026#34;,\u0026#34;refund_reason\u0026#34;:\u0026#34;ä¸æƒ³è¦äº†\u0026#34;} { \u0026#34;alipay_trade_refund_response\u0026#34;: { \u0026#34;code\u0026#34;: \u0026#34;10000\u0026#34;, \u0026#34;msg\u0026#34;: \u0026#34;Success\u0026#34;, \u0026#34;buyer_logon_id\u0026#34;: \u0026#34;xia***@gmail.com\u0026#34;, \u0026#34;buyer_user_id\u0026#34;: \u0026#34;2088202345875734\u0026#34;, \u0026#34;fund_change\u0026#34;: \u0026#34;Y\u0026#34;, \u0026#34;gmt_refund_pay\u0026#34;: \u0026#34;2022-12-10 14:21:19\u0026#34;, \u0026#34;out_trade_no\u0026#34;: \u0026#34;DH-O-2022-12-08-978069\u0026#34;, \u0026#34;refund_fee\u0026#34;: \u0026#34;0.02\u0026#34;, \u0026#34;send_back_fee\u0026#34;: \u0026#34;0.00\u0026#34;, \u0026#34;trade_no\u0026#34;: \u0026#34;2022121022001475731434706311\u0026#34; }, \u0026#34;alipay_cert_sn\u0026#34;: \u0026#34;421f39ba4d8149cde08b15a426a12734\u0026#34;, \u0026#34;sign\u0026#34;: \u0026#34;C1tH+ax0yAMdWHNcBiHi7BLjHeNttrBA4X3hsgoftsQrrTvQogL2t/ZBS+wB8iuwfPddqyDkPdIMeKN7yjVSYNCdij8ufx1Kpk1i1RgIlzNUdH9zAO0lyCH5q6eHaRDwQBuY/BlCLc7Q5iZuW0fTkcz+UvQ+hMA++UMGh+gk2rq+89ZglZDuY8CC7zxxFuVD7pRdSE+tmoGwXi2HYmmZg0d0OYPhgI+MfnA+9vG+juLrYmHBWjyQrpQmXJecFzwWcKP3M0S9dLMSinHbfVyw7/2RG+vu3rBcDUYXjaghoTx8pVo7+wul+hr3+m7soG/RBaoV6nufCefu5pWyUbz4ZA==\u0026#34; } {\u0026#34;alipay_trade_refund_response\u0026#34;:{\u0026#34;code\u0026#34;:\u0026#34;10000\u0026#34;,\u0026#34;msg\u0026#34;:\u0026#34;Success\u0026#34;,\u0026#34;buyer_logon_id\u0026#34;:\u0026#34;xia***@gmail.com\u0026#34;,\u0026#34;buyer_user_id\u0026#34;:\u0026#34;2088202345875734\u0026#34;,\u0026#34;fund_change\u0026#34;:\u0026#34;Y\u0026#34;,\u0026#34;gmt_refund_pay\u0026#34;:\u0026#34;2022-12-12 12:45:08\u0026#34;,\u0026#34;out_trade_no\u0026#34;:\u0026#34;DH-O-2022-12-08-978069\u0026#34;,\u0026#34;refund_fee\u0026#34;:\u0026#34;0.04\u0026#34;,\u0026#34;send_back_fee\u0026#34;:\u0026#34;0.00\u0026#34;,\u0026#34;trade_no\u0026#34;:\u0026#34;2022121022001475731434706311\u0026#34;},\u0026#34;alipay_cert_sn\u0026#34;:\u0026#34;421f39ba4d8149cde08b15a426a12734\u0026#34;,\u0026#34;sign\u0026#34;:\u0026#34;aaEbzHRSRbPfWdbuJ7rLTNCVNXqILvp28F/8p7d85D9xEcDa45MwbxSJsb0gx7zARBvQZT9+SPPPLoCEyLO3hWmmxGe6vO7C2G0AcEDxOhjgOGOyd40SmmagV2UkcpdmW18Wxu8yUM3bwGcuL8HxX8MMruunmNmk77NIyW4oDE/9miNMsoeUucUGA79FvrfnY7Xs4XPloGLIHhmrasJfsMh5+TMk3hjncLs9SVBtKGtg1LlVwyUT88cA4uF8eWmSHVxQ3kPCdRqB4lV18u2xlSVw0eT1zZ9+1blm0BXoi16B21S4Jn+xqBIFqRAVt3OabIzfFF4J7NMgRnoWiDfXXQ==\u0026#34;} { \u0026#34;alipay_trade_refund_response\u0026#34;: { \u0026#34;code\u0026#34;: \u0026#34;40004\u0026#34;, \u0026#34;msg\u0026#34;: \u0026#34;Business Failed\u0026#34;, \u0026#34;sub_code\u0026#34;: \u0026#34;ACQ.DISCORDANT_REPEAT_REQUEST\u0026#34;, \u0026#34;sub_msg\u0026#34;: \u0026#34;é€€æ¬¾é‡‘é¢ä¸ä¸€è‡´\u0026#34;, \u0026#34;refund_fee\u0026#34;: \u0026#34;0.00\u0026#34;, \u0026#34;send_back_fee\u0026#34;: \u0026#34;0.00\u0026#34; }, \u0026#34;alipay_cert_sn\u0026#34;: \u0026#34;421f39ba4d8149cde08b15a426a12734\u0026#34;, \u0026#34;sign\u0026#34;: \u0026#34;AbN/lkHQIYOqdfKkUo45fxsxCkiiq2+NLiOBaVrsoGp83ptbHFTZmHqRnFI7EzsKdkVQD1i5jP+5vUPLMpHqM6vTM8zMBco17BQhS2pqUZe8wVKBTKj2lalpbWurJNYIFgwt33Gl39c81YywtpXwzt/2oLoBnaj8CHlEioVVSof/USD8ikN/VwjllfinuiDjYKs7JB3MPk3275RPTSoP7tB8Vmz4Z0YD2b00txwxYa2S2w8pVS6/dAW5runCGws8o+GMgQqMw9Gpjuewt9DmhdbY+nUBo0wu4ojpUHA6ld9bDuhgH861WGvQz1pf1QXtYzV3kjDqyFsZU0OHVrKTfg==\u0026#34; } æµ‹è¯• @Test public void aliRefund() throws Exception{ AlipayClient alipayClient = AlipayConfig.getAlipayClient(); AlipayTradeRefundRequest request = new AlipayTradeRefundRequest(); AlipayTradeRefundModel model = new AlipayTradeRefundModel(); String orderNo = \u0026#34;SO-20221208-978060\u0026#34;; model.setOutTradeNo(orderNo); model.setRefundAmount(\u0026#34;0.03\u0026#34;); model.setOutRequestNo(\u0026#34;HZ01RF004\u0026#34;); model.setRefundReason(\u0026#34;ä¸æƒ³è¦äº†\u0026#34;); request.setBizModel(model); RdPayLog payLog = new RdPayLog(); payLog.setOrderId(orderNo); payLog.setPaytype(\u0026#34;æ”¯ä»˜å®é€€æ¬¾\u0026#34;); payLog.setRequestParam(JSON.toJSONString(model)); try { AlipayTradeRefundResponse response = alipayClient.certificateExecute(request); payLog.setResponseParam(response.getBody()); if (!response.isSuccess()) { throw new BizException(response.getSubMsg()); } } catch (AlipayApiException e) { payLog.setResponseParam(e.getErrCode()+\u0026#34;===\u0026#34;+e.getErrMsg()); }finally { payLogMapper.insert(payLog); } } @Test public void wxRefund() { String orderNo = \u0026#34;SO-20221208-978060\u0026#34;; WxPayRefundRequest wxPayRefundRequest = new WxPayRefundRequest(); wxPayRefundRequest.setOutTradeNo(orderNo); wxPayRefundRequest.setOutRefundNo(\u0026#34;22222\u0026#34;); wxPayRefundRequest.setRefundFee(2); wxPayRefundRequest.setRefundDesc(\u0026#34;ä¸å¥½çœ‹ é€€è´§\u0026#34;); wxPayRefundRequest.setTotalFee(2100); RdPayLog payLog = new RdPayLog(); payLog.setOrderId(orderNo); payLog.setPaytype(\u0026#34;å¾®ä¿¡é€€æ¬¾\u0026#34;); payLog.setRequestParam(wxPayRefundRequest.toXML()); try { WxPayRefundResult result = wxService.refund(wxPayRefundRequest); payLog.setResponseParam(result.getXmlString()); } catch (WxPayException e) { payLog.setResponseParam(e.getXmlString()); throw new BizException(e.getMessage()); }finally { payLogMapper.insert(payLog); } } ","permalink":"https://xiaoqiaotq.github.io/posts/misc/%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98_vs_%E6%94%AF%E4%BB%98%E5%AE%9D%E6%94%AF%E4%BB%98/","summary":"å¾®ä¿¡æ”¯ä»˜ https://pay.weixin.qq.com/wiki/doc/api/jsapi.php?chapter=9_4\nhttps://github.com/Wechat-Group/WxJava\nhttps://pay.weixin.qq.com/wiki/doc/api/wxa/wxa_api.php?chapter=2_2\nå¾®ä¿¡å¹³å°ä»‹ç»ï¼š\nå…¬ä¼—å·å¹³å° å•†æˆ·å¹³å° å¼€æ”¾å¹³å° æ”¯ä»˜äº§å“åå­—å˜æ›´ï¼š\nå…¬ä¼—å·æ”¯ä»˜-å˜æ›´ä¸º-JSAPIæ”¯ä»˜ã€‚ å¾®ä¿¡æµè§ˆå™¨ æ‰«ç æ”¯ä»˜-å˜æ›´ä¸º-Nativeæ”¯ä»˜ ç³»ç»ŸæŒ‰å¾®ä¿¡æ”¯ä»˜åè®®ç”Ÿæˆæ”¯ä»˜äºŒç»´ç ï¼Œéç§»åŠ¨æ”¯ä»˜ åˆ·å¡æ”¯ä»˜-å˜æ›´ä¸º-ä»˜æ¬¾ç æ”¯ä»˜ çº¿ä¸‹æ”¶é“¶ APPæ”¯ä»˜ã€‚ç§»åŠ¨ç«¯sdk H5æ”¯ä»˜ ç§»åŠ¨æµè§ˆå™¨ï¼ŒåŒºåˆ†ä¸åŒå¾®ä¿¡æµè§ˆå™¨ å°ç¨‹åºæ”¯ä»˜ å°ç¨‹åºç¯å¢ƒä¸­æ”¯ä»˜ å…¶ä»–å¾…åº”ç”¨ ä¼ä¸šä»˜æ¬¾æ¥å£ ï¼Ÿ ä»˜æ¬¾åˆ°é›¶é’±-å•†æˆ· ä»˜æ¬¾åˆ°é“¶è¡Œå¡-å•†æˆ· ç”µå­å‘ç¥¨ åˆå•æ”¯ä»˜ æŠ¥å…³ https://api.mch.weixin.qq.com/v3/refund/domestic/refunds\nç–‘é—® å•†æˆ·è¯ä¹¦ vs å¹³å°è¯ä¹¦ ï¼ˆå¯ä»¥ç†è§£å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ï¼‰ è¯ä¹¦è¿‡æœŸé—®é¢˜ï¼ˆå•†æˆ·å’Œå¹³å°ï¼‰ï¼Œæ”¯ä»˜å®æœ‰æé†’ï¼Œå¾®ä¿¡æ— ï¼Œè¿‡æœŸéœ€è¦å¼€å‘æ‰‹åŠ¨æ›¿æ¢ æ”¯ä»˜å®æ”¯ä»˜ https://opendocs.alipay.com/open/204/01dcc0?ref=api\nå¼€æ”¾å¹³å°\nAlipayConfig\nCN=Ant Financial Certification Authority Class 1 R1, OU=Certification Authority, O=Ant Financial, C=CN CN=2088421377101215-2021002127627083, OU=Alipay, O=é¸¿æµ·ï¼ˆè‹å·ï¼‰é£Ÿå“ç§‘æŠ€è‚¡ä»½æœ‰é™å…¬å¸, C=CN\nCN=æ”¯ä»˜å®(ä¸­å›½)ç½‘ç»œæŠ€æœ¯æœ‰é™å…¬å¸-2088421377101215, OU=Alipay, O=é¸¿æµ·ï¼ˆè‹å·ï¼‰é£Ÿå“ç§‘æŠ€è‚¡ä»½æœ‰é™å…¬å¸, C=CN CN=Ant Financial Certification Authority Class 2 R1, OU=Certification Authority, O=Ant Financial, C=CN CN=Ant Financial Certification Authority R1, OU=Certification Authority, O=Ant Financial, C=CN","title":"å¾®ä¿¡æ”¯ä»˜ ğŸ‘€ï¸ æ”¯ä»˜å®æ”¯ä»˜"},{"content":"äº‹æ•…ç°åœº ### Error querying database. Cause: java.sql.SQLSyntaxErrorException: ORA-00933: SQL command not properly ended ### The error may exist in class path resource [mappers/scm/NCMapper.xml] ### The error may involve defaultParameterMap ### The error occurred while setting parameters ### SQL: select name,code from bd_customer where name like \u0026#39;%%\u0026#39; LIMIT ? ### Cause: java.sql.SQLSyntaxErrorException: ORA-00933: SQL command not properly ended ; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: ORA-00933: SQL command not properly ended at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:91) at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:73) at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:82) at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:73) at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:446) at com.sun.proxy.$Proxy92.selectList(Unknown Source) at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:230) at org.apache.ibatis.binding.MapperMethod.executeForMany(MapperMethod.java:139) at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:76) at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:59) at com.sun.proxy.$Proxy187.findNCCustomerByKeyword(Unknown Source) at sun.reflect.GeneratedMethodAccessor1096.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:333) at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190) at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157) at com.baomidou.dynamic.datasource.aop.DynamicDataSourceAnnotationInterceptor.invoke(DynamicDataSourceAnnotationInterceptor.java:50) at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:213) at com.sun.proxy.$Proxy188.findNCCustomerByKeyword(Unknown Source) at com.redsea.scm.controller.qc.QCController.ncCustomer(QCController.java:94) è‡ªå®¡ å¼‚å¸¸å †æ ˆæ˜¾ç¤ºç”Ÿæˆçš„sqlä¸å¯¹ï¼Œå…ˆè¯´ä¸‹èƒŒæ™¯ï¼Œä¸»æ•°æ®æºæ˜¯mysqlï¼Œå‰¯æ•°æ®æºæ˜¯oracleï¼Œè¿™ä¸ªå †æ ˆæ˜¾ç¤ºå»æŸ¥oracleæ•°æ®åº“ï¼Œä½†æ˜¯ç”¨çš„åˆ†é¡µæ˜¯limitï¼ˆmysqlç‰¹æœ‰ï¼‰ï¼Œè¯´æ˜ç”Ÿæˆåˆ†é¡µè¯­å¥æœ‰é—®é¢˜ï¼Œå¸¦ç€è¿™ä¸ªç–‘é—®ï¼Œæƒ³å¼„æ¸…æ¥šåˆ†é¡µmybaitsæ’ä»¶æ˜¯æ€ä¹ˆå®ç°çš„ï¼Œä¸ºä»€ä¹ˆä¼šé€‰é”™æ•°æ®æº\nè°ƒç”¨ä»£ç  # controller @GetMapping(value = \u0026#34;/aa\u0026#34;) public BaseResponse aa( String keyword, HttpServletRequest request){ PageHelper.startPage(1, 20); List customers = ncMapper.aa(keyword); return BaseResponse.success(customers); } # Mapper.java @DS(\u0026#34;NCdata\u0026#34;) public interface NCMapper { List\u0026lt;NCCustomer\u0026gt; aa(@Param(\u0026#34;k\u0026#34;) String keyword); } # mapper.xml \u0026lt;select id=\u0026#34;aa\u0026#34; \u0026gt; select name,code from bd_customer where name like \u0026#39;%${k}%\u0026#39; \u0026lt;/select\u0026gt; ä»£ç å¾ˆç®€å• Bugå¾ˆå¥‡è‘© æ€€ç–‘å‡ºé—®é¢˜çš„ç‚¹ @Ds DynamicDataSourceAnnotationInterceptoræœ‰é—®é¢˜ PageHelper.startPage(1, 20); è°ƒè¯•æºç  PageHelper.startPage(1, 20); public static \u0026lt;E\u0026gt; Page\u0026lt;E\u0026gt; startPage(int pageNum, int pageSize, boolean count, Boolean reasonable, Boolean pageSizeZero) { Page\u0026lt;E\u0026gt; page = new Page\u0026lt;E\u0026gt;(pageNum, pageSize, count); page.setReasonable(reasonable); page.setPageSizeZero(pageSizeZero); //å½“å·²ç»æ‰§è¡Œè¿‡orderByçš„æ—¶å€™ Page\u0026lt;E\u0026gt; oldPage = getLocalPage(); if (oldPage != null \u0026amp;\u0026amp; oldPage.isOrderByOnly()) { page.setOrderBy(oldPage.getOrderBy()); } setLocalPage(page); return page; } protected static final ThreadLocal\u0026lt;Page\u0026gt; LOCAL_PAGE = new ThreadLocal\u0026lt;Page\u0026gt;(); protected static void setLocalPage(Page page) { LOCAL_PAGE.set(page); } PageInterceptor è°ƒç”¨ åˆå§‹åŒ–dialet æ’ä»¶é…ç½® å•ä¸€æ•°æ®æºé…ç½® å¤šæ•°æ®æºæ­£ç¡®é…ç½® ç»“è®º @ds æ˜¯aopå®ç° æ²¡æœ‰é—®é¢˜ PageHelper å¯ä»¥ç®¡ç†å¤šä¸ªæ•°æ®æºè€Œå®ç°åˆ†é¡µï¼Œé»˜è®¤åªæ”¯æŒç¼“å­˜å•ä¸ªæ•°æ®æº # å¢åŠ é…ç½® pagehelper.auto-runtime-dialect=true å‚è€ƒ https://pagehelper.github.io/docs/howtouse/ æ„Ÿæ‚Ÿ å‘ç°é—®é¢˜æ’æŸ¥æºç æ˜¯è§£å†³é—®é¢˜æ ¹æœ¬æŒ‡å¯¼ å®˜æ–¹é…ç½®å¤šçœ‹å‡ çœ¼ï¼Œæœ‰æ˜ç¡®äº‹ä¾‹ ","permalink":"https://xiaoqiaotq.github.io/posts/java/%E6%95%B0%E6%8D%AE%E6%BA%90%E5%88%87%E6%8D%A2%E5%A4%B1%E6%95%88/","summary":"äº‹æ•…ç°åœº ### Error querying database. Cause: java.sql.SQLSyntaxErrorException: ORA-00933: SQL command not properly ended ### The error may exist in class path resource [mappers/scm/NCMapper.xml] ### The error may involve defaultParameterMap ### The error occurred while setting parameters ### SQL: select name,code from bd_customer where name like \u0026#39;%%\u0026#39; LIMIT ? ### Cause: java.sql.SQLSyntaxErrorException: ORA-00933: SQL command not properly ended ; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: ORA-00933: SQL command not properly ended at org.","title":"è®°ä¸€æ¬¡å¤šæ•°æ®æºåˆ‡æ¢å¤±æ•ˆé—®é¢˜"},{"content":"reference https://www.madboa.com/geek/openssl\nå¸¸ç”¨å‘½ä»¤ X509è¯ä¹¦ # ç­‰äºcat alipay/alipayCertPublicKey_RSA2.crt openssl x509 -in alipay/alipayCertPublicKey_RSA2.crt # æ ¼å¼åŒ–è¾“å‡º openssl x509 -in alipay/alipayCertPublicKey_RSA2.crt -noout -text # å¯¼å‡º public key openssl x509 -in ~/cert/wxpay/apiclient_cert.pem -pubkey -noout \u0026gt; public.pem æ‘˜è¦ openssl md5 ~/Downloads/CertTrustChain.p7b openssl sha256 ~/Downloads/CertTrustChain.p7b p12 p12æ˜¯ä¸ªkeystoreï¼Œå¯ä»¥å­˜æ”¾è¯ä¹¦ï¼Œç§é’¥\n# æå–ç§é’¥ å¯èƒ½éœ€è¦è¾“å…¥å¯†ç  openssl pkcs12 -in wxpay/apiclient_cert.p12 -out aa-key.pem -nocerts # æå–è¯ä¹¦ï¼ˆè¯ä¹¦å¸¦å…¬é’¥ï¼‰ openssl pkcs12 -in wxpay/apiclient_cert.p12 -out aa.crt -clcerts -nokeys # è¯ä¹¦æå–å…¬é’¥ openssl x509 -in aa.crt -pubkey -noout \u0026gt; public.pem p7 è¯ä¹¦ä¿¡ä»»é“¾\n# äºŒè¿›åˆ¶derè½¬åŒ–ä¸º text openssl pkcs7 -in Downloads/CertTrustChain.p7b -inform der -print_certs -out chain.cer # éªŒè¯å•†æˆ·è¯ä¹¦ æœ€åçš„æ˜¯å¶å­è¯ä¹¦ openssl verify -CAfile chain.cer cert/wxpay/apiclient_cert.pem ","permalink":"https://xiaoqiaotq.github.io/posts/linux/openssl/","summary":"reference https://www.madboa.com/geek/openssl\nå¸¸ç”¨å‘½ä»¤ X509è¯ä¹¦ # ç­‰äºcat alipay/alipayCertPublicKey_RSA2.crt openssl x509 -in alipay/alipayCertPublicKey_RSA2.crt # æ ¼å¼åŒ–è¾“å‡º openssl x509 -in alipay/alipayCertPublicKey_RSA2.crt -noout -text # å¯¼å‡º public key openssl x509 -in ~/cert/wxpay/apiclient_cert.pem -pubkey -noout \u0026gt; public.pem æ‘˜è¦ openssl md5 ~/Downloads/CertTrustChain.p7b openssl sha256 ~/Downloads/CertTrustChain.p7b p12 p12æ˜¯ä¸ªkeystoreï¼Œå¯ä»¥å­˜æ”¾è¯ä¹¦ï¼Œç§é’¥\n# æå–ç§é’¥ å¯èƒ½éœ€è¦è¾“å…¥å¯†ç  openssl pkcs12 -in wxpay/apiclient_cert.p12 -out aa-key.pem -nocerts # æå–è¯ä¹¦ï¼ˆè¯ä¹¦å¸¦å…¬é’¥ï¼‰ openssl pkcs12 -in wxpay/apiclient_cert.p12 -out aa.crt -clcerts -nokeys # è¯ä¹¦æå–å…¬é’¥ openssl x509 -in aa.crt -pubkey -noout \u0026gt; public.pem p7 è¯ä¹¦ä¿¡ä»»é“¾","title":"Openssl"},{"content":"https://zh-hans.reactjs.org/docs/handling-events.html\nBabel ä¼šæŠŠ JSX è½¬è¯‘æˆä¸€ä¸ªåä¸º React.createElement() å‡½æ•°è°ƒç”¨ã€‚\nç»„ä»¶åç§°å¿…é¡»ä»¥å¤§å†™å­—æ¯å¼€å¤´ React ä¼šå°†ä»¥å°å†™å­—æ¯å¼€å¤´çš„ç»„ä»¶è§†ä¸ºåŸç”Ÿ DOM æ ‡ç­¾ã€‚ä¾‹å¦‚ï¼Œ\u0026lt;div /\u0026gt; ä»£è¡¨ HTML çš„ div æ ‡ç­¾ï¼Œè€Œ \u0026lt;Welcome /\u0026gt; åˆ™ä»£è¡¨ä¸€ä¸ªç»„ä»¶\nProps çš„åªè¯»æ€§ // Wrong this.setState({ counter: this.state.counter + this.props.increment, }); // Correct this.setState(function(state, props) { return { counter: state.counter + props.increment }; }); äº‹ä»¶ \u0026lt;button onClick={(e) =\u0026gt; this.deleteRow(id, e)}\u0026gt;Delete Row\u0026lt;/button\u0026gt; \u0026lt;button onClick={this.deleteRow.bind(this, id)}\u0026gt;Delete Row\u0026lt;/button\u0026gt; æ¡ä»¶æ¸²æŸ“ ä¸è¿ç®—ç¬¦ \u0026amp;\u0026amp; ä¸‰ç›®è¿ç®—ç¬¦ The user is \u0026lt;b\u0026gt;{isLoggedIn ? \u0026#39;currently\u0026#39; : \u0026#39;not\u0026#39;}\u0026lt;/b\u0026gt; logged in. {isLoggedIn ? \u0026lt;LogoutButton onClick={this.handleLogoutClick} /\u0026gt; : \u0026lt;LoginButton onClick={this.handleLoginClick} /\u0026gt; } é˜»æ­¢ç»„ä»¶æ¸²æŸ“ renderç›´æ¥ return null\nåˆ—è¡¨ \u0026amp; Key ","permalink":"https://xiaoqiaotq.github.io/posts/%E5%89%8D%E7%AB%AF/react/","summary":"https://zh-hans.reactjs.org/docs/handling-events.html\nBabel ä¼šæŠŠ JSX è½¬è¯‘æˆä¸€ä¸ªåä¸º React.createElement() å‡½æ•°è°ƒç”¨ã€‚\nç»„ä»¶åç§°å¿…é¡»ä»¥å¤§å†™å­—æ¯å¼€å¤´ React ä¼šå°†ä»¥å°å†™å­—æ¯å¼€å¤´çš„ç»„ä»¶è§†ä¸ºåŸç”Ÿ DOM æ ‡ç­¾ã€‚ä¾‹å¦‚ï¼Œ\u0026lt;div /\u0026gt; ä»£è¡¨ HTML çš„ div æ ‡ç­¾ï¼Œè€Œ \u0026lt;Welcome /\u0026gt; åˆ™ä»£è¡¨ä¸€ä¸ªç»„ä»¶\nProps çš„åªè¯»æ€§ // Wrong this.setState({ counter: this.state.counter + this.props.increment, }); // Correct this.setState(function(state, props) { return { counter: state.counter + props.increment }; }); äº‹ä»¶ \u0026lt;button onClick={(e) =\u0026gt; this.deleteRow(id, e)}\u0026gt;Delete Row\u0026lt;/button\u0026gt; \u0026lt;button onClick={this.deleteRow.bind(this, id)}\u0026gt;Delete Row\u0026lt;/button\u0026gt; æ¡ä»¶æ¸²æŸ“ ä¸è¿ç®—ç¬¦ \u0026amp;\u0026amp; ä¸‰ç›®è¿ç®—ç¬¦ The user is \u0026lt;b\u0026gt;{isLoggedIn ? \u0026#39;currently\u0026#39; : \u0026#39;not\u0026#39;}\u0026lt;/b\u0026gt; logged in. {isLoggedIn ?","title":"React"},{"content":"æŠ€æœ¯é€‰é¡¹ ç›´æ¥ç”¨Hugo ä¸è¦é—®æˆ‘ä¸ºä»€ä¹ˆ\nå®‰è£… // å®‰è£…hugo brew install hugo // æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸï¼ŒæŸ¥çœ‹ç‰ˆæœ¬ hugo env ç›®å½• å¯åŠ¨ hugo new site xiaoqiaotq-blog cd xiaoqiaotq-blog git init # å®˜æ–¹sample theme git submodule add https://github.com/theNewDynamic/gohugo-theme-ananke themes/ananke echo \u0026#34;theme = \u0026#39;ananke\u0026#39;\u0026#34; \u0026gt;\u0026gt; config.toml # æœ¬åœ°æµ‹è¯•é¢„è§ˆ hugo server -D æ·»åŠ gitignore\n# Generated files by hugo /public/ /resources/_gen/ /assets/jsconfig.json hugo_stats.json # Executable may be added to repository hugo.exe hugo.darwin hugo.linux # Temporary lock file while building /.hugo_build.lock .idea ä¸»é¢˜ æš‚æ—¶æ‰¾ä¸ªä¸ªç®€å•çš„,æœ‰æ—¶é—´åœ¨æ‰¾ PaperMod https://adityatelange.github.io/hugo-PaperMod/\néƒ¨ç½²åˆ°github page https://github.com/peaceiris/actions-hugo\ngithub æ–°å»ºrepository, xiaoqiaotq.github.io å…³è”è¿œç¨‹remote Â·git remote add origin master https://github.com/xiaoqiaotq/xiaoqiaotq.github.io.git æ·»åŠ Action name: github pages on: push: branches: - main # Set a branch that will trigger a deployment pull_request: jobs: deploy: runs-on: ubuntu-22.04 steps: - uses: actions/checkout@v3 with: submodules: true # Fetch Hugo themes (true OR recursive) fetch-depth: 0 # Fetch all history for .GitInfo and .Lastmod - name: Setup Hugo uses: peaceiris/actions-hugo@v2 with: hugo-version: \u0026#39;latest\u0026#39; # extended: true - name: Build run: hugo --minify - name: Deploy uses: peaceiris/actions-gh-pages@v3 if: github.ref == \u0026#39;refs/heads/main\u0026#39; with: github_token: ${{ secrets.GITHUB_TOKEN }} publish_dir: ./public è´´ä¸‹é…ç½® config.yml baseURL: \u0026#34;https://xiaoqiaotq.github.io\u0026#34; languageCode: \u0026#34;zh-cn\u0026#34; title: \u0026#34;xiaoqiaotq\u0026#34; theme: \u0026#34;PaperMod\u0026#34; menu: main: - identifier: åˆ†ç±» name: åˆ†ç±» url: /categories/ weight: 10 - identifier: æ ‡ç­¾ name: æ ‡ç­¾ url: /tags/ weight: 20 # - identifier: example # name: example.org # url: https://example.org # weight: 30 # - identifier: home # name: ä¸»é¡µ # url: /posts/hom è®¿é—® https://xiaoqiaotq.github.io\nå‚è€ƒ https://gohugo.io/getting-started/quick-start/\n","permalink":"https://xiaoqiaotq.github.io/posts/misc/blog%E5%8D%9A%E5%AE%A2%E6%90%9E%E8%B5%B7/","summary":"æŠ€æœ¯é€‰é¡¹ ç›´æ¥ç”¨Hugo ä¸è¦é—®æˆ‘ä¸ºä»€ä¹ˆ\nå®‰è£… // å®‰è£…hugo brew install hugo // æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸï¼ŒæŸ¥çœ‹ç‰ˆæœ¬ hugo env ç›®å½• å¯åŠ¨ hugo new site xiaoqiaotq-blog cd xiaoqiaotq-blog git init # å®˜æ–¹sample theme git submodule add https://github.com/theNewDynamic/gohugo-theme-ananke themes/ananke echo \u0026#34;theme = \u0026#39;ananke\u0026#39;\u0026#34; \u0026gt;\u0026gt; config.toml # æœ¬åœ°æµ‹è¯•é¢„è§ˆ hugo server -D æ·»åŠ gitignore\n# Generated files by hugo /public/ /resources/_gen/ /assets/jsconfig.json hugo_stats.json # Executable may be added to repository hugo.exe hugo.darwin hugo.linux # Temporary lock file while building /.hugo_build.lock .idea ä¸»é¢˜ æš‚æ—¶æ‰¾ä¸ªä¸ªç®€å•çš„,æœ‰æ—¶é—´åœ¨æ‰¾ PaperMod https://adityatelange.","title":"åšå®¢å»ºç«™"}]