<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>记一次多数据源切换失效问题 | xiaoqiaotq</title><meta name=keywords content="JAVA,MyBaits,数据源"><meta name=description content="事故现场 ### Error querying database. Cause: java.sql.SQLSyntaxErrorException: ORA-00933: SQL command not properly ended ### The error may exist in class path resource [mappers/scm/NCMapper.xml] ### The error may involve defaultParameterMap ### The error occurred while setting parameters ### SQL: select name,code from bd_customer where name like '%%' LIMIT ? ### Cause: java.sql.SQLSyntaxErrorException: ORA-00933: SQL command not properly ended ; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: ORA-00933: SQL command not properly ended at org."><meta name=author content><link rel=canonical href=https://xiaoqiaotq.github.io/posts/java/%E6%95%B0%E6%8D%AE%E6%BA%90%E5%88%87%E6%8D%A2%E5%A4%B1%E6%95%88/><link crossorigin=anonymous href=/assets/css/stylesheet.min.c88963fe2d79462000fd0fb1b3737783c32855d340583e4523343f8735c787f0.css integrity="sha256-yIlj/i15RiAA/Q+xs3N3g8MoVdNAWD5FIzQ/hzXHh/A=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.b95bacdc39e37a332a9f883b1e78be4abc1fdca2bc1f2641f55e3cd3dabd4d61.js integrity="sha256-uVus3DnjejMqn4g7Hni+Srwf3KK8HyZB9V4809q9TWE=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://xiaoqiaotq.github.io/64%2A64.ico><link rel=icon type=image/png sizes=16x16 href=https://xiaoqiaotq.github.io/16%2A16.ico><link rel=icon type=image/png sizes=32x32 href=https://xiaoqiaotq.github.io/32%2A32.ico><link rel=apple-touch-icon href=https://xiaoqiaotq.github.io/64%2A64.ico><link rel=mask-icon href=https://xiaoqiaotq.github.io/64%2A64.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.110.0"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-100577868-1","auto"),ga("send","pageview"))</script><meta property="og:title" content="记一次多数据源切换失效问题"><meta property="og:description" content="事故现场 ### Error querying database. Cause: java.sql.SQLSyntaxErrorException: ORA-00933: SQL command not properly ended ### The error may exist in class path resource [mappers/scm/NCMapper.xml] ### The error may involve defaultParameterMap ### The error occurred while setting parameters ### SQL: select name,code from bd_customer where name like '%%' LIMIT ? ### Cause: java.sql.SQLSyntaxErrorException: ORA-00933: SQL command not properly ended ; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: ORA-00933: SQL command not properly ended at org."><meta property="og:type" content="article"><meta property="og:url" content="https://xiaoqiaotq.github.io/posts/java/%E6%95%B0%E6%8D%AE%E6%BA%90%E5%88%87%E6%8D%A2%E5%A4%B1%E6%95%88/"><meta property="og:image" content="https://cn.bing.com/th?id=OHR.Borovets_ZH-CN5914681811_1920x1080.jpg&rf=LaDigue_1920x1080.jpg&pid=hp"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-12-11T13:29:16+08:00"><meta property="article:modified_time" content="2022-12-11T13:29:16+08:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://cn.bing.com/th?id=OHR.Borovets_ZH-CN5914681811_1920x1080.jpg&rf=LaDigue_1920x1080.jpg&pid=hp"><meta name=twitter:title content="记一次多数据源切换失效问题"><meta name=twitter:description content="事故现场 ### Error querying database. Cause: java.sql.SQLSyntaxErrorException: ORA-00933: SQL command not properly ended ### The error may exist in class path resource [mappers/scm/NCMapper.xml] ### The error may involve defaultParameterMap ### The error occurred while setting parameters ### SQL: select name,code from bd_customer where name like '%%' LIMIT ? ### Cause: java.sql.SQLSyntaxErrorException: ORA-00933: SQL command not properly ended ; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: ORA-00933: SQL command not properly ended at org."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://xiaoqiaotq.github.io/posts/"},{"@type":"ListItem","position":3,"name":"记一次多数据源切换失效问题","item":"https://xiaoqiaotq.github.io/posts/java/%E6%95%B0%E6%8D%AE%E6%BA%90%E5%88%87%E6%8D%A2%E5%A4%B1%E6%95%88/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"记一次多数据源切换失效问题","name":"记一次多数据源切换失效问题","description":"事故现场 ### Error querying database. Cause: java.sql.SQLSyntaxErrorException: ORA-00933: SQL command not properly ended ### The error may exist in class path resource [mappers/scm/NCMapper.xml] ### The error may involve defaultParameterMap ### The error occurred while setting parameters ### SQL: select name,code from bd_customer where name like \u0026#39;%%\u0026#39; LIMIT ? ### Cause: java.sql.SQLSyntaxErrorException: ORA-00933: SQL command not properly ended ; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: ORA-00933: SQL command not properly ended at org.","keywords":["JAVA","MyBaits","数据源"],"articleBody":"事故现场 ### Error querying database. Cause: java.sql.SQLSyntaxErrorException: ORA-00933: SQL command not properly ended ### The error may exist in class path resource [mappers/scm/NCMapper.xml] ### The error may involve defaultParameterMap ### The error occurred while setting parameters ### SQL: select name,code from bd_customer where name like '%%' LIMIT ? ### Cause: java.sql.SQLSyntaxErrorException: ORA-00933: SQL command not properly ended ; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: ORA-00933: SQL command not properly ended at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:91) at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:73) at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:82) at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:73) at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:446) at com.sun.proxy.$Proxy92.selectList(Unknown Source) at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:230) at org.apache.ibatis.binding.MapperMethod.executeForMany(MapperMethod.java:139) at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:76) at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:59) at com.sun.proxy.$Proxy187.findNCCustomerByKeyword(Unknown Source) at sun.reflect.GeneratedMethodAccessor1096.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:333) at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190) at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157) at com.baomidou.dynamic.datasource.aop.DynamicDataSourceAnnotationInterceptor.invoke(DynamicDataSourceAnnotationInterceptor.java:50) at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:213) at com.sun.proxy.$Proxy188.findNCCustomerByKeyword(Unknown Source) at com.redsea.scm.controller.qc.QCController.ncCustomer(QCController.java:94) 自审 异常堆栈显示生成的sql不对，先说下背景，主数据源是mysql，副数据源是oracle，这个堆栈显示去查oracle数据库，但是用的分页是limit（mysql特有），说明生成分页语句有问题，带着这个疑问，想弄清楚分页mybaits插件是怎么实现的，为什么会选错数据源\n调用代码 # controller @GetMapping(value = \"/aa\") public BaseResponse aa( String keyword, HttpServletRequest request){ PageHelper.startPage(1, 20); List customers = ncMapper.aa(keyword); return BaseResponse.success(customers); } # Mapper.java @DS(\"NCdata\") public interface NCMapper { List aa(@Param(\"k\") String keyword); } # mapper.xml select name,code from bd_customer where name like '%${k}%' 代码很简单 Bug很奇葩 怀疑出问题的点 @Ds DynamicDataSourceAnnotationInterceptor有问题 PageHelper.startPage(1, 20); 调试源码 PageHelper.startPage(1, 20); public static Page startPage(int pageNum, int pageSize, boolean count, Boolean reasonable, Boolean pageSizeZero) { Page page = new Page(pageNum, pageSize, count); page.setReasonable(reasonable); page.setPageSizeZero(pageSizeZero); //当已经执行过orderBy的时候 Page oldPage = getLocalPage(); if (oldPage != null \u0026\u0026 oldPage.isOrderByOnly()) { page.setOrderBy(oldPage.getOrderBy()); } setLocalPage(page); return page; } protected static final ThreadLocal LOCAL_PAGE = new ThreadLocal(); protected static void setLocalPage(Page page) { LOCAL_PAGE.set(page); } PageInterceptor 调用 初始化dialet 插件配置 单一数据源配置 多数据源正确配置 结论 @ds 是aop实现 没有问题 PageHelper 可以管理多个数据源而实现分页，默认只支持缓存单个数据源 # 增加配置 pagehelper.auto-runtime-dialect=true 参考 https://pagehelper.github.io/docs/howtouse/ 感悟 发现问题排查源码是解决问题根本指导 官方配置多看几眼，有明确事例 ","wordCount":"258","inLanguage":"en","image":"https://cn.bing.com/th?id=OHR.Borovets_ZH-CN5914681811_1920x1080.jpg\u0026rf=LaDigue_1920x1080.jpg\u0026pid=hp","datePublished":"2022-12-11T13:29:16+08:00","dateModified":"2022-12-11T13:29:16+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://xiaoqiaotq.github.io/posts/java/%E6%95%B0%E6%8D%AE%E6%BA%90%E5%88%87%E6%8D%A2%E5%A4%B1%E6%95%88/"},"publisher":{"@type":"Organization","name":"xiaoqiaotq","logo":{"@type":"ImageObject","url":"https://xiaoqiaotq.github.io/64%2A64.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://xiaoqiaotq.github.io accesskey=h title="xiaoqiaotq (Alt + H)">xiaoqiaotq</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://xiaoqiaotq.github.io/archives title=总览><span>总览</span></a></li><li><a href=https://xiaoqiaotq.github.io/search/ title=搜索><span>搜索</span></a></li><li><a href=https://xiaoqiaotq.github.io/tags/ title=标签><span>标签</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>记一次多数据源切换失效问题</h1><div class=post-meta><span title='2022-12-11 13:29:16 +0800 +0800'>December 11, 2022</span></div></header><div class=post-content><h4 id=事故现场>事故现场<a hidden class=anchor aria-hidden=true href=#事故现场>#</a></h4><pre tabindex=0><code>### Error querying database.  Cause: java.sql.SQLSyntaxErrorException: ORA-00933: SQL command not properly ended

### The error may exist in class path resource [mappers/scm/NCMapper.xml]
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: select name,code from bd_customer         where          name like &#39;%%&#39;  LIMIT ?
### Cause: java.sql.SQLSyntaxErrorException: ORA-00933: SQL command not properly ended

; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: ORA-00933: SQL command not properly ended

	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:91)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:73)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:82)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:73)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:446)
	at com.sun.proxy.$Proxy92.selectList(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:230)
	at org.apache.ibatis.binding.MapperMethod.executeForMany(MapperMethod.java:139)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:76)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:59)
	at com.sun.proxy.$Proxy187.findNCCustomerByKeyword(Unknown Source)
	at sun.reflect.GeneratedMethodAccessor1096.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:333)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at com.baomidou.dynamic.datasource.aop.DynamicDataSourceAnnotationInterceptor.invoke(DynamicDataSourceAnnotationInterceptor.java:50)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:213)
	at com.sun.proxy.$Proxy188.findNCCustomerByKeyword(Unknown Source)
	at com.redsea.scm.controller.qc.QCController.ncCustomer(QCController.java:94)
</code></pre><h4 id=自审>自审<a hidden class=anchor aria-hidden=true href=#自审>#</a></h4><p>异常堆栈显示生成的sql不对，先说下背景，主数据源是mysql，副数据源是oracle，这个堆栈显示去查oracle数据库，但是用的分页是limit（mysql特有），说明生成分页语句有问题，带着这个疑问，想弄清楚分页mybaits插件是怎么实现的，为什么会选错数据源</p><h4 id=调用代码>调用代码<a hidden class=anchor aria-hidden=true href=#调用代码>#</a></h4><pre tabindex=0><code># controller
@GetMapping(value = &#34;/aa&#34;)
public BaseResponse aa( String keyword, HttpServletRequest request){
    PageHelper.startPage(1, 20);
    List customers = ncMapper.aa(keyword);
    return BaseResponse.success(customers);
}

# Mapper.java
@DS(&#34;NCdata&#34;)
public interface NCMapper {
    List&lt;NCCustomer&gt; aa(@Param(&#34;k&#34;) String keyword);
}

# mapper.xml
&lt;select id=&#34;aa&#34; &gt;
    select name,code from bd_customer
    where
     name like &#39;%${k}%&#39;
&lt;/select&gt;
</code></pre><h4 id=代码很简单-bug很奇葩>代码很简单 Bug很奇葩<a hidden class=anchor aria-hidden=true href=#代码很简单-bug很奇葩>#</a></h4><h5 id=怀疑出问题的点>怀疑出问题的点<a hidden class=anchor aria-hidden=true href=#怀疑出问题的点>#</a></h5><ol><li>@Ds DynamicDataSourceAnnotationInterceptor有问题</li><li>PageHelper.startPage(1, 20);</li></ol><h4 id=调试源码>调试源码<a hidden class=anchor aria-hidden=true href=#调试源码>#</a></h4><h5 id=pagehelperstartpage1-20>PageHelper.startPage(1, 20);<a hidden class=anchor aria-hidden=true href=#pagehelperstartpage1-20>#</a></h5><pre tabindex=0><code>    public static &lt;E&gt; Page&lt;E&gt; startPage(int pageNum, int pageSize, boolean count, Boolean reasonable, Boolean pageSizeZero) {
        Page&lt;E&gt; page = new Page&lt;E&gt;(pageNum, pageSize, count);
        page.setReasonable(reasonable);
        page.setPageSizeZero(pageSizeZero);
        //当已经执行过orderBy的时候
        Page&lt;E&gt; oldPage = getLocalPage();
        if (oldPage != null &amp;&amp; oldPage.isOrderByOnly()) {
            page.setOrderBy(oldPage.getOrderBy());
        }
        setLocalPage(page);
        return page;
    }
    
    protected static final ThreadLocal&lt;Page&gt; LOCAL_PAGE = new ThreadLocal&lt;Page&gt;();

    protected static void setLocalPage(Page page) {
        LOCAL_PAGE.set(page);
    }
</code></pre><h5 id=pageinterceptor-调用>PageInterceptor 调用<a hidden class=anchor aria-hidden=true href=#pageinterceptor-调用>#</a></h5><p><div class=post-img-view><a data-fancybox=gallery href=https://s2.loli.net/2022/12/15/q8Os2LAwf7b9hMQ.png><img src=https://s2.loli.net/2022/12/15/q8Os2LAwf7b9hMQ.png alt=WX20221215-143631@2x.png></a></div></p><h5 id=初始化dialet>初始化dialet<a hidden class=anchor aria-hidden=true href=#初始化dialet>#</a></h5><p><div class=post-img-view><a data-fancybox=gallery href=https://s2.loli.net/2022/12/15/Lc9uWPHZGF5VRnX.png><img src=https://s2.loli.net/2022/12/15/Lc9uWPHZGF5VRnX.png alt=WX20221215-143606@2x.png></a></div></p><p><div class=post-img-view><a data-fancybox=gallery href=https://s2.loli.net/2022/12/15/K8lkCUzWEGVc9FR.png><img src=https://s2.loli.net/2022/12/15/K8lkCUzWEGVc9FR.png alt=WX20221215-143536@2x.png></a></div></p><p><div class=post-img-view><a data-fancybox=gallery href=https://s2.loli.net/2022/12/15/oBqpYkUxE96IyC8.png><img src=https://s2.loli.net/2022/12/15/oBqpYkUxE96IyC8.png alt=WX20221215-143405@2x.png></a></div></p><h5 id=插件配置>插件配置<a hidden class=anchor aria-hidden=true href=#插件配置>#</a></h5><p><div class=post-img-view><a data-fancybox=gallery href=https://s2.loli.net/2022/12/15/G1qwQ6dE3KxVODL.png><img src=https://s2.loli.net/2022/12/15/G1qwQ6dE3KxVODL.png alt=WX20221215-143902@2x.png></a></div></p><h5 id=单一数据源配置>单一数据源配置<a hidden class=anchor aria-hidden=true href=#单一数据源配置>#</a></h5><p><div class=post-img-view><a data-fancybox=gallery href=https://s2.loli.net/2022/12/15/15trVuAi9TBnqea.png><img src=https://s2.loli.net/2022/12/15/15trVuAi9TBnqea.png alt=WX20221215-144341@2x.png></a></div></p><h5 id=多数据源正确配置>多数据源正确配置<a hidden class=anchor aria-hidden=true href=#多数据源正确配置>#</a></h5><p><div class=post-img-view><a data-fancybox=gallery href=https://s2.loli.net/2022/12/15/Q9Nus1eG8zZJWkh.png><img src=https://s2.loli.net/2022/12/15/Q9Nus1eG8zZJWkh.png alt=WX20221215-142557@2x.png></a></div></p><h4 id=结论>结论<a hidden class=anchor aria-hidden=true href=#结论>#</a></h4><ol><li>@ds 是aop实现 没有问题</li><li>PageHelper 可以管理多个数据源而实现分页，默认只支持缓存单个数据源</li></ol><pre tabindex=0><code># 增加配置
pagehelper.auto-runtime-dialect=true
</code></pre><p>参考 <a href=https://pagehelper.github.io/docs/howtouse/>https://pagehelper.github.io/docs/howtouse/</a><div class=post-img-view><a data-fancybox=gallery href=https://s2.loli.net/2022/12/15/IgsvEBuOJ3e2HUf.png><img src=https://s2.loli.net/2022/12/15/IgsvEBuOJ3e2HUf.png alt=WX20221215-150544@2x.png></a></div></p><p><div class=post-img-view><a data-fancybox=gallery href=https://s2.loli.net/2022/12/15/7DcNIvWrmnkAjTq.png><img src=https://s2.loli.net/2022/12/15/7DcNIvWrmnkAjTq.png alt=WX20221215-150830@2x.png></a></div></p><h4 id=感悟>感悟<a hidden class=anchor aria-hidden=true href=#感悟>#</a></h4><ol><li>发现问题排查源码是解决问题根本指导</li><li>官方配置多看几眼，有明确事例</li></ol></div><footer class=post-footer><ul class=post-tags><li><a href=https://xiaoqiaotq.github.io/tags/java/>JAVA</a></li><li><a href=https://xiaoqiaotq.github.io/tags/mybaits/>MyBaits</a></li><li><a href=https://xiaoqiaotq.github.io/tags/%E6%95%B0%E6%8D%AE%E6%BA%90/>数据源</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://xiaoqiaotq.github.io>xiaoqiaotq</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script src=https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css><script src=https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js></script></body></html>