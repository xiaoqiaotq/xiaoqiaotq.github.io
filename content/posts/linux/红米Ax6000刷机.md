---
title: "红米Ax6000刷机"
date: 2022-12-20T21:04:16+08:00
draft: false
tags: ["Linux","OpenWrt"]
cover:
    image: "https://cn.bing.com/th?id=OHR.PalaceBelvedere_ZH-CN1818163173_1920x1080.jpg&rf=LaDigue_1920x1080.jpg&pid=hp"
    hidden: true # only hide on current single page
---

#### 背景
家里路由器信号太差了想换一台，真好看到拼多多有活动（360RMB）就入手了一台，顺便手痒想刷下机，看看有什么好玩的软件和应用。

![a127ca3994740588cbbf9ac5404fc38b.png](https://openwrt.org/_media/media/xiaomi/redmi-ax6000.png)

#### 配置
红米 AX6000 搭载的是 MTK 2021 年发布的 Filogic 830 平台，具体型号是 mt7986a，四核 ARM A53 的架构， 512M 内存和 128M 闪存



#### 刷机openwrt

https://openwrt.org/toh/xiaomi/redmi_ax6000

![WX20221221-092557@2x.png](https://s2.loli.net/2022/12/21/VFIfWyTMLGdY48v.png)

官方固件还没有release 先不刷机了
https://downloads.openwrt.org/snapshots/targets/mediatek/filogic/

![WX20221220-105120@2x.png](https://s2.loli.net/2022/12/21/YFng4Q5dBTWNaLA.png)


先贴一个官方刷机教材，等release再回头看看
https://github.com/openwrt/openwrt/pull/11115

1. Gain ssh access (see the link: https://openwrt.org/toh/xiaomi/redmi_ax6000#installation)
2. Check current stock system
   COMMAND: cat /proc/cmdline
   sample OUTPUT: console=ttyS0,115200n1 loglevel=8 firmware=1 uart_en=1
   if firmware=1, current system is ubi1
   if firmware=0, current system is ubi0
3. Setup nvram
   If the current system is ubi1, please set it up so that the next time it will boot from ubi:
```
nvram set boot_wait=on
nvram set uart_en=1
nvram set flag_boot_rootfs=0
nvram set flag_last_success=0
nvram set flag_boot_success=1
nvram set flag_try_sys1_failed=0
nvram set flag_try_sys2_failed=0
nvram commit
```
If the current system is ubi, please set it up so that the next time it will boot from ubi1:
```
nvram set boot_wait=on
nvram set uart_en=1
nvram set flag_boot_rootfs=1
nvram set flag_last_success=1
nvram set flag_boot_success=1
nvram set flag_try_sys1_failed=0
nvram set flag_try_sys2_failed=0
nvram commit
```
4. Flash initramfs-factory.ubi
   If the firmware=1, the current system is using ubi1. In this case, flash the image to ubi:
   `ubiformat /dev/mtd8 -y -f /tmp/initramfs-factory.ubi`
   If the firmware=0, the current system is using ubi. In this case, flash the image to ubi1:
   `ubiformat /dev/mtd9 -y -f /tmp/initramfs-factory.ubi`
5. After rebooting, the system should now boot into the openwrt initramfs system. Flash the squashfs-sysupgrade.bin via ssh
   `sysupgrade -n /tmp/squashfs-sysupgrade.bin`
   or you could do sysupgrade via luci

Done.



#### github issue追踪进度
https://github.com/openwrt/openwrt/issues?q=11115

#### 关于AX6000的刷机讨论
https://forum.openwrt.org/t/add-openwrt-support-for-xiaomi-redmi-ax6000/125008/378

#### 小米官方固件地址和版本
https://www.miwifi.com/miwifi_download.html
1.0.48 下载地址
https://cdn.cnbj1.fds.api.mi-img.com/xiaoqiang/rom/rb06/miwifi_rb06_firmware_847e9_1.0.48.bin